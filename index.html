<!DOCTYPE html>
<html lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta name="generator" content="AsciiDoc 8.6.10">
<title>Thrift: The Missing Guide</title>
<style type="text/css">
/* Shared CSS for AsciiDoc xhtml11 and html5 backends */

/* Default font. */
body {
  font-family: Georgia,serif;
}

/* Title font. */
h1, h2, h3, h4, h5, h6,
div.title, caption.title,
thead, p.table.header,
#toctitle,
#author, #revnumber, #revdate, #revremark,
#footer {
  font-family: Arial,Helvetica,sans-serif;
}

body {
  margin: 1em 5% 1em 5%;
}

a {
  color: blue;
  text-decoration: underline;
}
a:visited {
  color: fuchsia;
}

em {
  font-style: italic;
  color: navy;
}

strong {
  font-weight: bold;
  color: #083194;
}

h1, h2, h3, h4, h5, h6 {
  color: #527bbd;
  margin-top: 1.2em;
  margin-bottom: 0.5em;
  line-height: 1.3;
}

h1, h2, h3 {
  border-bottom: 2px solid silver;
}
h2 {
  padding-top: 0.5em;
}
h3 {
  float: left;
}
h3 + * {
  clear: left;
}
h5 {
  font-size: 1.0em;
}

div.sectionbody {
  margin-left: 0;
}

hr {
  border: 1px solid silver;
}

p {
  margin-top: 0.5em;
  margin-bottom: 0.5em;
}

ul, ol, li > p {
  margin-top: 0;
}
ul > li     { color: #aaa; }
ul > li > * { color: black; }

pre {
  padding: 0;
  margin: 0;
}

#author {
  color: #527bbd;
  font-weight: bold;
  font-size: 1.1em;
}
#email {
}
#revnumber, #revdate, #revremark {
}

#footer {
  font-size: small;
  border-top: 2px solid silver;
  padding-top: 0.5em;
  margin-top: 4.0em;
}
#footer-text {
  float: left;
  padding-bottom: 0.5em;
}
#footer-badges {
  float: right;
  padding-bottom: 0.5em;
}

#preamble {
  margin-top: 1.5em;
  margin-bottom: 1.5em;
}
div.imageblock, div.exampleblock, div.verseblock,
div.quoteblock, div.literalblock, div.listingblock, div.sidebarblock,
div.admonitionblock {
  margin-top: 1.0em;
  margin-bottom: 1.5em;
}
div.admonitionblock {
  margin-top: 2.0em;
  margin-bottom: 2.0em;
  margin-right: 10%;
  color: #606060;
}

div.content { /* Block element content. */
  padding: 0;
}

/* Block element titles. */
div.title, caption.title {
  color: #527bbd;
  font-weight: bold;
  text-align: left;
  margin-top: 1.0em;
  margin-bottom: 0.5em;
}
div.title + * {
  margin-top: 0;
}

td div.title:first-child {
  margin-top: 0.0em;
}
div.content div.title:first-child {
  margin-top: 0.0em;
}
div.content + div.title {
  margin-top: 0.0em;
}

div.sidebarblock > div.content {
  background: #ffffee;
  border: 1px solid #dddddd;
  border-left: 4px solid #f0f0f0;
  padding: 0.5em;
}

div.listingblock > div.content {
  border: 1px solid #dddddd;
  border-left: 5px solid #f0f0f0;
  background: #f8f8f8;
  padding: 0.5em;
}

div.quoteblock, div.verseblock {
  padding-left: 1.0em;
  margin-left: 1.0em;
  margin-right: 10%;
  border-left: 5px solid #f0f0f0;
  color: #777777;
}

div.quoteblock > div.attribution {
  padding-top: 0.5em;
  text-align: right;
}

div.verseblock > pre.content {
  font-family: inherit;
  font-size: inherit;
}
div.verseblock > div.attribution {
  padding-top: 0.75em;
  text-align: left;
}
/* DEPRECATED: Pre version 8.2.7 verse style literal block. */
div.verseblock + div.attribution {
  text-align: left;
}

div.admonitionblock .icon {
  vertical-align: top;
  font-size: 1.1em;
  font-weight: bold;
  text-decoration: underline;
  color: #527bbd;
  padding-right: 0.5em;
}
div.admonitionblock td.content {
  padding-left: 0.5em;
  border-left: 3px solid #dddddd;
}

div.exampleblock > div.content {
  border-left: 3px solid #dddddd;
  padding-left: 0.5em;
}

div.imageblock div.content { padding-left: 0; }
span.image img { border-style: none; }
a.image:visited { color: white; }

dl {
  margin-top: 0.8em;
  margin-bottom: 0.8em;
}
dt {
  margin-top: 0.5em;
  margin-bottom: 0;
  font-style: normal;
  color: navy;
}
dd > *:first-child {
  margin-top: 0.1em;
}

ul, ol {
    list-style-position: outside;
}
ol.arabic {
  list-style-type: decimal;
}
ol.loweralpha {
  list-style-type: lower-alpha;
}
ol.upperalpha {
  list-style-type: upper-alpha;
}
ol.lowerroman {
  list-style-type: lower-roman;
}
ol.upperroman {
  list-style-type: upper-roman;
}

div.compact ul, div.compact ol,
div.compact p, div.compact p,
div.compact div, div.compact div {
  margin-top: 0.1em;
  margin-bottom: 0.1em;
}

tfoot {
  font-weight: bold;
}
td > div.verse {
  white-space: pre;
}

div.hdlist {
  margin-top: 0.8em;
  margin-bottom: 0.8em;
}
div.hdlist tr {
  padding-bottom: 15px;
}
dt.hdlist1.strong, td.hdlist1.strong {
  font-weight: bold;
}
td.hdlist1 {
  vertical-align: top;
  font-style: normal;
  padding-right: 0.8em;
  color: navy;
}
td.hdlist2 {
  vertical-align: top;
}
div.hdlist.compact tr {
  margin: 0;
  padding-bottom: 0;
}

.comment {
  background: yellow;
}

.footnote, .footnoteref {
  font-size: 0.8em;
}

span.footnote, span.footnoteref {
  vertical-align: super;
}

#footnotes {
  margin: 20px 0 20px 0;
  padding: 7px 0 0 0;
}

#footnotes div.footnote {
  margin: 0 0 5px 0;
}

#footnotes hr {
  border: none;
  border-top: 1px solid silver;
  height: 1px;
  text-align: left;
  margin-left: 0;
  width: 20%;
  min-width: 100px;
}

div.colist td {
  padding-right: 0.5em;
  padding-bottom: 0.3em;
  vertical-align: top;
}
div.colist td img {
  margin-top: 0.3em;
}

@media print {
  #footer-badges { display: none; }
}

#toc {
  margin-bottom: 2.5em;
}

#toctitle {
  color: #527bbd;
  font-size: 1.1em;
  font-weight: bold;
  margin-top: 1.0em;
  margin-bottom: 0.1em;
}

div.toclevel1, div.toclevel2, div.toclevel3, div.toclevel4 {
  margin-top: 0;
  margin-bottom: 0;
}
div.toclevel2 {
  margin-left: 2em;
  font-size: 0.9em;
}
div.toclevel3 {
  margin-left: 4em;
  font-size: 0.9em;
}
div.toclevel4 {
  margin-left: 6em;
  font-size: 0.9em;
}

span.aqua { color: aqua; }
span.black { color: black; }
span.blue { color: blue; }
span.fuchsia { color: fuchsia; }
span.gray { color: gray; }
span.green { color: green; }
span.lime { color: lime; }
span.maroon { color: maroon; }
span.navy { color: navy; }
span.olive { color: olive; }
span.purple { color: purple; }
span.red { color: red; }
span.silver { color: silver; }
span.teal { color: teal; }
span.white { color: white; }
span.yellow { color: yellow; }

span.aqua-background { background: aqua; }
span.black-background { background: black; }
span.blue-background { background: blue; }
span.fuchsia-background { background: fuchsia; }
span.gray-background { background: gray; }
span.green-background { background: green; }
span.lime-background { background: lime; }
span.maroon-background { background: maroon; }
span.navy-background { background: navy; }
span.olive-background { background: olive; }
span.purple-background { background: purple; }
span.red-background { background: red; }
span.silver-background { background: silver; }
span.teal-background { background: teal; }
span.white-background { background: white; }
span.yellow-background { background: yellow; }

span.big { font-size: 2em; }
span.small { font-size: 0.6em; }

span.underline { text-decoration: underline; }
span.overline { text-decoration: overline; }
span.line-through { text-decoration: line-through; }


/*
 * xhtml11 specific
 *
 * */

tt {
  font-family: monospace;
  font-size: inherit;
  color: navy;
}

div.tableblock {
  margin-top: 1.0em;
  margin-bottom: 1.5em;
}
div.tableblock > table {
  border: 3px solid #527bbd;
}
thead, p.table.header {
  font-weight: bold;
  color: #527bbd;
}
p.table {
  margin-top: 0;
}
/* Because the table frame attribute is overriden by CSS in most browsers. */
div.tableblock > table[frame="void"] {
  border-style: none;
}
div.tableblock > table[frame="hsides"] {
  border-left-style: none;
  border-right-style: none;
}
div.tableblock > table[frame="vsides"] {
  border-top-style: none;
  border-bottom-style: none;
}


/*
 * html5 specific
 *
 * */

.monospaced {
  font-family: monospace;
  font-size: inherit;
  color: navy;
}

table.tableblock {
  margin-top: 1.0em;
  margin-bottom: 1.5em;
}
thead, p.tableblock.header {
  font-weight: bold;
  color: #527bbd;
}
p.tableblock {
  margin-top: 0;
}
table.tableblock {
  border-width: 3px;
  border-spacing: 0px;
  border-style: solid;
  border-color: #527bbd;
  border-collapse: collapse;
}
th.tableblock, td.tableblock {
  border-width: 1px;
  padding: 4px;
  border-style: solid;
  border-color: #527bbd;
}

table.tableblock.frame-topbot {
  border-left-style: hidden;
  border-right-style: hidden;
}
table.tableblock.frame-sides {
  border-top-style: hidden;
  border-bottom-style: hidden;
}
table.tableblock.frame-none {
  border-style: hidden;
}

th.tableblock.halign-left, td.tableblock.halign-left {
  text-align: left;
}
th.tableblock.halign-center, td.tableblock.halign-center {
  text-align: center;
}
th.tableblock.halign-right, td.tableblock.halign-right {
  text-align: right;
}

th.tableblock.valign-top, td.tableblock.valign-top {
  vertical-align: top;
}
th.tableblock.valign-middle, td.tableblock.valign-middle {
  vertical-align: middle;
}
th.tableblock.valign-bottom, td.tableblock.valign-bottom {
  vertical-align: bottom;
}


/*
 * manpage specific
 *
 * */

body.manpage h1 {
  padding-top: 0.5em;
  padding-bottom: 0.5em;
  border-top: 2px solid silver;
  border-bottom: 2px solid silver;
}
body.manpage h2 {
  border-style: none;
}
body.manpage div.sectionbody {
  margin-left: 3em;
}

@media print {
  body.manpage div#toc { display: none; }
}


/*
 * Theme specific overrides of the preceding (asciidoc.css) CSS.
 *
 */
body {
  font-family: Garamond, Georgia, serif;
  font-size: 17px;
  color: #3E4349;
  line-height: 1.3em;
}
h1, h2, h3, h4, h5, h6,
div.title, caption.title,
thead, p.table.header,
#toctitle,
#author, #revnumber, #revdate, #revremark,
#footer {
  font-family: Garmond, Georgia, serif;
  font-weight: normal;
  border-bottom-width: 0;
  color: #3E4349;
}
div.title, caption.title { color: #596673; font-weight: bold; }
h1 { font-size: 240%; }
h2 { font-size: 180%; }
h3 { font-size: 150%; }
h4 { font-size: 130%; }
h5 { font-size: 115%; }
h6 { font-size: 100%; }
#header h1 { margin-top: 0; }
#toc {
  color: #444444;
  line-height: 1.5;
  padding-top: 1.5em;
}
#toctitle {
  font-size: 20px;
}
#toc a {
    border-bottom: 1px dotted #999999;
    color: #444444 !important;
    text-decoration: none !important;
}
#toc a:hover {
    border-bottom: 1px solid #6D4100;
    color: #6D4100 !important;
    text-decoration: none !important;
}
div.toclevel1 { margin-top: 0.2em; font-size: 16px; }
div.toclevel2 { margin-top: 0.15em; font-size: 14px; }
em, dt, td.hdlist1 { color: black; }
strong { color: #3E4349; }
a { color: #004B6B; text-decoration: none; border-bottom: 1px dotted #004B6B; }
a:visited { color: #615FA0; border-bottom: 1px dotted #615FA0; }
a:hover { color: #6D4100; border-bottom: 1px solid #6D4100; }
div.tableblock > table, table.tableblock { border: 3px solid #E8E8E8; }
th.tableblock, td.tableblock { border: 1px solid #E8E8E8; }
ul > li > * { color: #3E4349; }
pre, tt, .monospaced { font-family: Consolas,Menlo,'Deja Vu Sans Mono','Bitstream Vera Sans Mono',monospace; }
tt, .monospaced { font-size: 0.9em; color: black;
}
div.exampleblock > div.content, div.sidebarblock > div.content, div.listingblock > div.content { border-width: 0 0 0 3px; border-color: #E8E8E8; }
div.verseblock { border-left-width: 0; margin-left: 3em; }
div.quoteblock { border-left-width: 3px; margin-left: 0; margin-right: 0;}
div.admonitionblock td.content { border-left: 3px solid #E8E8E8; }

.highlight .hll { background-color: #ffffcc }
.highlight  { background: #f8f8f8; }
.highlight .c { color: #408080; font-style: italic } /* Comment */
.highlight .err { border: 1px solid #FF0000 } /* Error */
.highlight .k { color: #008000; font-weight: bold } /* Keyword */
.highlight .o { color: #666666 } /* Operator */
.highlight .cm { color: #408080; font-style: italic } /* Comment.Multiline */
.highlight .cp { color: #BC7A00 } /* Comment.Preproc */
.highlight .c1 { color: #408080; font-style: italic } /* Comment.Single */
.highlight .cs { color: #408080; font-style: italic } /* Comment.Special */
.highlight .gd { color: #A00000 } /* Generic.Deleted */
.highlight .ge { font-style: italic } /* Generic.Emph */
.highlight .gr { color: #FF0000 } /* Generic.Error */
.highlight .gh { color: #000080; font-weight: bold } /* Generic.Heading */
.highlight .gi { color: #00A000 } /* Generic.Inserted */
.highlight .go { color: #808080 } /* Generic.Output */
.highlight .gp { color: #000080; font-weight: bold } /* Generic.Prompt */
.highlight .gs { font-weight: bold } /* Generic.Strong */
.highlight .gu { color: #800080; font-weight: bold } /* Generic.Subheading */
.highlight .gt { color: #0040D0 } /* Generic.Traceback */
.highlight .kc { color: #008000; font-weight: bold } /* Keyword.Constant */
.highlight .kd { color: #008000; font-weight: bold } /* Keyword.Declaration */
.highlight .kn { color: #008000; font-weight: bold } /* Keyword.Namespace */
.highlight .kp { color: #008000 } /* Keyword.Pseudo */
.highlight .kr { color: #008000; font-weight: bold } /* Keyword.Reserved */
.highlight .kt { color: #B00040 } /* Keyword.Type */
.highlight .m { color: #666666 } /* Literal.Number */
.highlight .s { color: #BA2121 } /* Literal.String */
.highlight .na { color: #7D9029 } /* Name.Attribute */
.highlight .nb { color: #008000 } /* Name.Builtin */
.highlight .nc { color: #0000FF; font-weight: bold } /* Name.Class */
.highlight .no { color: #880000 } /* Name.Constant */
.highlight .nd { color: #AA22FF } /* Name.Decorator */
.highlight .ni { color: #999999; font-weight: bold } /* Name.Entity */
.highlight .ne { color: #D2413A; font-weight: bold } /* Name.Exception */
.highlight .nf { color: #0000FF } /* Name.Function */
.highlight .nl { color: #A0A000 } /* Name.Label */
.highlight .nn { color: #0000FF; font-weight: bold } /* Name.Namespace */
.highlight .nt { color: #008000; font-weight: bold } /* Name.Tag */
.highlight .nv { color: #19177C } /* Name.Variable */
.highlight .ow { color: #AA22FF; font-weight: bold } /* Operator.Word */
.highlight .w { color: #bbbbbb } /* Text.Whitespace */
.highlight .mf { color: #666666 } /* Literal.Number.Float */
.highlight .mh { color: #666666 } /* Literal.Number.Hex */
.highlight .mi { color: #666666 } /* Literal.Number.Integer */
.highlight .mo { color: #666666 } /* Literal.Number.Oct */
.highlight .sb { color: #BA2121 } /* Literal.String.Backtick */
.highlight .sc { color: #BA2121 } /* Literal.String.Char */
.highlight .sd { color: #BA2121; font-style: italic } /* Literal.String.Doc */
.highlight .s2 { color: #BA2121 } /* Literal.String.Double */
.highlight .se { color: #BB6622; font-weight: bold } /* Literal.String.Escape */
.highlight .sh { color: #BA2121 } /* Literal.String.Heredoc */
.highlight .si { color: #BB6688; font-weight: bold } /* Literal.String.Interpol */
.highlight .sx { color: #008000 } /* Literal.String.Other */
.highlight .sr { color: #BB6688 } /* Literal.String.Regex */
.highlight .s1 { color: #BA2121 } /* Literal.String.Single */
.highlight .ss { color: #19177C } /* Literal.String.Symbol */
.highlight .bp { color: #008000 } /* Name.Builtin.Pseudo */
.highlight .vc { color: #19177C } /* Name.Variable.Class */
.highlight .vg { color: #19177C } /* Name.Variable.Global */
.highlight .vi { color: #19177C } /* Name.Variable.Instance */
.highlight .il { color: #666666 } /* Literal.Number.Integer.Long */

@media screen {
  body {
    max-width: 50em; /* approximately 80 characters wide */
    margin-left: 16em;
  }

  #toc {
    position: fixed;
    top: 0;
    left: 0;
    bottom: 0;
    width: 13em;
    padding: 0.5em;
    padding-bottom: 1.5em;
    margin: 0;
    overflow: auto;
    border-right: 3px solid #f8f8f8;
    background-color: white;
  }

  #toc .toclevel1 {
    margin-top: 0.5em;
  }

  #toc .toclevel2 {
    margin-top: 0.25em;
    display: list-item;
    color: #aaaaaa;
  }

  #toctitle {
    margin-top: 0.5em;
  }
}
</style>
<script type="text/javascript">
/*<![CDATA[*/
var asciidoc = {  // Namespace.

/////////////////////////////////////////////////////////////////////
// Table Of Contents generator
/////////////////////////////////////////////////////////////////////

/* Author: Mihai Bazon, September 2002
 * http://students.infoiasi.ro/~mishoo
 *
 * Table Of Content generator
 * Version: 0.4
 *
 * Feel free to use this script under the terms of the GNU General Public
 * License, as long as you do not remove or alter this notice.
 */

 /* modified by Troy D. Hanson, September 2006. License: GPL */
 /* modified by Stuart Rackham, 2006, 2009. License: GPL */

// toclevels = 1..4.
toc: function (toclevels) {

  function getText(el) {
    var text = "";
    for (var i = el.firstChild; i != null; i = i.nextSibling) {
      if (i.nodeType == 3 /* Node.TEXT_NODE */) // IE doesn't speak constants.
        text += i.data;
      else if (i.firstChild != null)
        text += getText(i);
    }
    return text;
  }

  function TocEntry(el, text, toclevel) {
    this.element = el;
    this.text = text;
    this.toclevel = toclevel;
  }

  function tocEntries(el, toclevels) {
    var result = new Array;
    var re = new RegExp('[hH]([1-'+(toclevels+1)+'])');
    // Function that scans the DOM tree for header elements (the DOM2
    // nodeIterator API would be a better technique but not supported by all
    // browsers).
    var iterate = function (el) {
      for (var i = el.firstChild; i != null; i = i.nextSibling) {
        if (i.nodeType == 1 /* Node.ELEMENT_NODE */) {
          var mo = re.exec(i.tagName);
          if (mo && (i.getAttribute("class") || i.getAttribute("className")) != "float") {
            result[result.length] = new TocEntry(i, getText(i), mo[1]-1);
          }
          iterate(i);
        }
      }
    }
    iterate(el);
    return result;
  }

  var toc = document.getElementById("toc");
  if (!toc) {
    return;
  }

  // Delete existing TOC entries in case we're reloading the TOC.
  var tocEntriesToRemove = [];
  var i;
  for (i = 0; i < toc.childNodes.length; i++) {
    var entry = toc.childNodes[i];
    if (entry.nodeName.toLowerCase() == 'div'
     && entry.getAttribute("class")
     && entry.getAttribute("class").match(/^toclevel/))
      tocEntriesToRemove.push(entry);
  }
  for (i = 0; i < tocEntriesToRemove.length; i++) {
    toc.removeChild(tocEntriesToRemove[i]);
  }

  // Rebuild TOC entries.
  var entries = tocEntries(document.getElementById("content"), toclevels);
  for (var i = 0; i < entries.length; ++i) {
    var entry = entries[i];
    if (entry.element.id == "")
      entry.element.id = "_toc_" + i;
    var a = document.createElement("a");
    a.href = "#" + entry.element.id;
    a.appendChild(document.createTextNode(entry.text));
    var div = document.createElement("div");
    div.appendChild(a);
    div.className = "toclevel" + entry.toclevel;
    toc.appendChild(div);
  }
  if (entries.length == 0)
    toc.parentNode.removeChild(toc);
},


/////////////////////////////////////////////////////////////////////
// Footnotes generator
/////////////////////////////////////////////////////////////////////

/* Based on footnote generation code from:
 * http://www.brandspankingnew.net/archive/2005/07/format_footnote.html
 */

footnotes: function () {
  // Delete existing footnote entries in case we're reloading the footnodes.
  var i;
  var noteholder = document.getElementById("footnotes");
  if (!noteholder) {
    return;
  }
  var entriesToRemove = [];
  for (i = 0; i < noteholder.childNodes.length; i++) {
    var entry = noteholder.childNodes[i];
    if (entry.nodeName.toLowerCase() == 'div' && entry.getAttribute("class") == "footnote")
      entriesToRemove.push(entry);
  }
  for (i = 0; i < entriesToRemove.length; i++) {
    noteholder.removeChild(entriesToRemove[i]);
  }

  // Rebuild footnote entries.
  var cont = document.getElementById("content");
  var spans = cont.getElementsByTagName("span");
  var refs = {};
  var n = 0;
  for (i=0; i<spans.length; i++) {
    if (spans[i].className == "footnote") {
      n++;
      var note = spans[i].getAttribute("data-note");
      if (!note) {
        // Use [\s\S] in place of . so multi-line matches work.
        // Because JavaScript has no s (dotall) regex flag.
        note = spans[i].innerHTML.match(/\s*\[([\s\S]*)]\s*/)[1];
        spans[i].innerHTML =
          "[<a id='_footnoteref_" + n + "' href='#_footnote_" + n +
          "' title='View footnote' class='footnote'>" + n + "</a>]";
        spans[i].setAttribute("data-note", note);
      }
      noteholder.innerHTML +=
        "<div class='footnote' id='_footnote_" + n + "'>" +
        "<a href='#_footnoteref_" + n + "' title='Return to text'>" +
        n + "</a>. " + note + "</div>";
      var id =spans[i].getAttribute("id");
      if (id != null) refs["#"+id] = n;
    }
  }
  if (n == 0)
    noteholder.parentNode.removeChild(noteholder);
  else {
    // Process footnoterefs.
    for (i=0; i<spans.length; i++) {
      if (spans[i].className == "footnoteref") {
        var href = spans[i].getElementsByTagName("a")[0].getAttribute("href");
        href = href.match(/#.*/)[0];  // Because IE return full URL.
        n = refs[href];
        spans[i].innerHTML =
          "[<a href='#_footnote_" + n +
          "' title='View footnote' class='footnote'>" + n + "</a>]";
      }
    }
  }
},

install: function(toclevels) {
  var timerId;

  function reinstall() {
    asciidoc.footnotes();
    if (toclevels) {
      asciidoc.toc(toclevels);
    }
  }

  function reinstallAndRemoveTimer() {
    clearInterval(timerId);
    reinstall();
  }

  timerId = setInterval(reinstall, 500);
  if (document.addEventListener)
    document.addEventListener("DOMContentLoaded", reinstallAndRemoveTimer, false);
  else
    window.onload = reinstallAndRemoveTimer;
}

}
asciidoc.install(2);
/*]]>*/
</script>
<meta name="description" content="A comprehensive guide and reference documentation for Thrift"/>
<meta name="keywords" content="thrift,facebook,rpc,guide,documentation,protobuf"/>

<script type="text/javascript">

  var _gaq = _gaq || [];
  _gaq.push(['_setAccount', 'UA-21971077-1']);
  _gaq.push(['_trackPageview']);

  (function() {
    var ga = document.createElement('script'); ga.type = 'text/javascript'; ga.async = true;
    ga.src = ('https:' == document.location.protocol ? 'https://ssl' : 'http://www') + '.google-analytics.com/ga.js';
    var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(ga, s);
  })();

</script>
</head>
<body class="article">
<div id="header">
<h1>Thrift: The Missing Guide</h1>
<span id="author">Diwaker Gupta</span><br>
<span id="email" class="monospaced">&lt;<a href="mailto:me@diwakergupta.info">me@diwakergupta.info</a>&gt;</span><br>
<div id="toc">
  <div id="toctitle">Table of Contents</div>
  <noscript><p><b>JavaScript must be enabled in your browser to display the table of contents.</b></p></noscript>
</div>
</div>
<div id="content">
<div id="preamble">
<div class="sectionbody">
<div class="paragraph"><p>2018-04-16:
Written against Thrift 0.6.0</p></div>
<div class="paragraph"><p>基于 Thrift 0.6.0</p></div>
<div class="paragraph"><p>From the <a href="http://thrift.apache.org">Thrift website</a>:</p></div>
<div class="paragraph"><p>正如 <a href="http://thrift.apache.org">Thrift网站</a> 所说:</p></div>
<div class="quoteblock">
<div class="content">Thrift is a software framework for scalable cross-language services development.
It combines a software stack with a code generation engine to build services
that work efficiently and seamlessly between C++, Java, Python, PHP, Ruby,
Erlang, Perl, Haskell, C#, Cocoa, JavaScript, Node.js, Smalltalk, and OCaml.</div>
<div class="attribution">
</div></div>
<div class="quoteblock">
<div class="content">Thrift是一个用于可扩展的, 跨语言的服务开发软件框架.
它将软件栈和代码生成引擎相结合起来, 高效及无缝地创建可以连接基于不同语言的服务.
Thrift支持的语言包括: C++, Java, Python, PHP, Ruby,
Erlang, Perl, Haskell, C#, Cocoa, JavaScript, Node.js, Smalltalk, and OCaml.</div>
<div class="attribution">
</div></div>
<div class="paragraph"><p>Thrift is clearly abundant in features. What is sorely lacking though is <em>good</em>
documentation. This guide is an attempt to fill that hole. But note that this is
a reference guide&#8201;&#8212;&#8201;for a step-by-step example on how to use Thrift, refer to
the Thrift tutorial.</p></div>
<div class="paragraph"><p>在所提供的特性方面, Thrift无疑是非常丰富的. 它唯一的缺点就是缺少一个 <em>好的</em> 文档.
这个导引的目的就是为了填补这个空白. 但是, 这个指引仅做参考&#8201;&#8212;&#8201;如果需要的是一个一步步讲解如何使用
Thrift的例子, 请参考 Thrift tutorial.</p></div>
<div class="paragraph"><p>Many aspects of the structure and organization of this guide have been borrowed
from the (excellent)
<a href="http://code.google.com/apis/protocolbuffers/docs/proto.html">Google Protocol
Buffer Language Guide</a>. I thank the authors of that document.</p></div>
<div class="paragraph"><p>本导引在结构和组织的很多方面, 都借鉴了(出色的)
<a href="http://code.google.com/apis/protocolbuffers/docs/proto.html">Google Protocol
Buffer Language Guide</a>. 在此对其作者表示感谢.</p></div>
<div class="paragraph"><p>A <a href="thrift.pdf">PDF version</a> is also available.</p></div>
<div class="paragraph"><p><a href="thrift.pdf">PDF版本</a>也可由此下载.</p></div>
<div class="paragraph"><div class="title">Copyright 版权</div><p>Copyright &#169; 2013 Diwaker Gupta</p></div>
<div class="paragraph"><p>This work is licensed under the
<a href="http://creativecommons.org/licenses/by-nc/3.0/">Creative Commons
Attribution-NonCommercial 3.0
Unported License</a>.</p></div>
<div class="paragraph"><p>本指引遵循协议 <a href="http://creativecommons.org/licenses/by-nc/3.0/">Creative Commons
Attribution-NonCommercial 3.0
Unported License</a>.</p></div>
<div class="paragraph"><div class="title">Contributions 贡献</div><p>I welcome feedback and contributions to this guide. You can find the
<a href="https://github.com/diwakergupta/thrift-missing-guide">source code</a>
over at <a href="http://github.com">GitHub</a>. Alternatively, you can file a
<a href="https://github.com/diwakergupta/thrift-missing-guide/issues">bug</a>.</p></div>
<div class="paragraph"><p>我欢迎对于此导引的反馈和贡献
<a href="https://github.com/diwakergupta/thrift-missing-guide">源码</a>.
或者, 报告 <a href="https://github.com/diwakergupta/thrift-missing-guide/issues">bug</a>.</p></div>
<div class="paragraph"><div class="title">Acknowledgements 鸣谢</div><p>I thank the authors of Thrift for the software, the authors of the Google
Protocol Buffer documentation for the inspiration and the Thrift community for
the feedback. Special thanks to Dave Engberg from Evernote for his input.</p></div>
<div class="paragraph"><p>首先感谢Thrift软件的作者.
以及Google Protocol Buffer的作者给予的灵感和来自Thrift的反馈.
特别感谢Dave Engberg.</p></div>
<div class="paragraph"><div class="title">About the Author 关于作者</div><p>I&#8217;m an open source geek and a software architect. I blog over at
<a href="http://floatingsun.net">Floating Sun</a> and you can find more about me
<a href="http://diwakergupta.info">here</a>.</p></div>
<div class="paragraph"><p>我是一名开源极客和软件架构师.</p></div>
<div class="paragraph"><p>Blog: <a href="http://floatingsun.net">Floating Sun</a></p></div>
<div class="paragraph"><p>个人网站: <a href="http://diwakergupta.info">here</a></p></div>
</div>
</div>
<div class="sect1">
<h2 id="_language_reference_语言参考">Language Reference 语言参考</h2>
<div class="sectionbody">
<div class="sect2">
<h3 id="_types_类型">Types 类型</h3>
<div class="paragraph"><p>The Thrift type system consists of pre-defined base types, user-defined structs,
container types, exceptions and service definitions.</p></div>
<div class="paragraph"><p>Thrift的类型系统包含预定义的基础类型, 用户定义的结构体, 容器类型, 异常以及服务定义.</p></div>
<div class="sect3">
<h4 id="_base_types_基础类型">Base Types 基础类型</h4>
<div class="ulist"><ul>
<li>
<p>
<span class="monospaced">bool</span>: 布尔值(true或false), 一个字节. A boolean value (true or false), one byte
</p>
</li>
<li>
<p>
<span class="monospaced">byte</span>: 一个字节. A signed byte
</p>
</li>
<li>
<p>
<span class="monospaced">i16</span>: 16位带符号整数. A 16-bit signed integer
</p>
</li>
<li>
<p>
<span class="monospaced">i32</span>: 32位带符号整数. A 32-bit signed integer
</p>
</li>
<li>
<p>
<span class="monospaced">i64</span>: 64位带符号整数. A 64-bit signed integer
</p>
</li>
<li>
<p>
<span class="monospaced">double</span>: 64位浮点数. A 64-bit floating point number
</p>
</li>
<li>
<p>
<span class="monospaced">binary</span>: 字节数组. A byte array
</p>
</li>
<li>
<p>
<span class="monospaced">string</span>: 编码未知的文本或者二进制字符串. Encoding agnostic text or binary string
</p>
</li>
</ul></div>
<div class="paragraph"><p>Note that Thrift does not support unsigned integers because they have no direct
translation to native (primitive) types in many of Thrift&#8217;s target languages.</p></div>
<div class="paragraph"><p>注意, Thrift不支持无符号整数. 因为, 多数Thrift的目标语言并没有对应的原生类型.</p></div>
</div>
<div class="sect3">
<h4 id="_containers_容器">Containers 容器</h4>
<div class="paragraph"><p>Thrift containers are strongly typed containers that map to the most commonly
used containers in popular programming languages. They are annotated using the
Java Generics style. There are three containers types available:</p></div>
<div class="paragraph"><p>Thrift容器是和流行编程语言类似的强类型容器.
他们使用的都是类似Java泛型的风格. 有三种容器可供使用:</p></div>
<div class="ulist"><ul>
<li>
<p>
<span class="monospaced">list&lt;t1&gt;</span>: 一个 <span class="monospaced">t1</span> 类型的有序列表, 元素可能重复. An ordered list of elements of type <span class="monospaced">t1</span>. May contain duplicates.
</p>
</li>
<li>
<p>
<span class="monospaced">set&lt;t1&gt;</span>: 一个 <span class="monospaced">t1</span> 类型的无序集合. An unordered set of unique elements of type <span class="monospaced">t1</span>.
</p>
</li>
<li>
<p>
<span class="monospaced">map&lt;t1,t2&gt;</span>: 一个从键类型 <span class="monospaced">t1</span> 到值类型 <span class="monospaced">t2</span> 的映射. 键必须是唯一的. A map of strictly unique keys of type <span class="monospaced">t1</span> to values of type
  <span class="monospaced">t2</span>.
</p>
</li>
</ul></div>
<div class="paragraph"><p>Types used in containers may be any valid Thrift type (including structs and
exceptions) excluding services.</p></div>
<div class="paragraph"><p>容器类所使用的类型必须是有效的Thrift类型, 包括结构体和异常, 但不包含服务.</p></div>
</div>
<div class="sect3">
<h4 id="_structs_and_exceptions_结构体和异常">Structs and Exceptions 结构体和异常</h4>
<div class="paragraph"><p>A Thrift struct is conceptually similar to a <span class="monospaced">C</span> struct&#8201;&#8212;&#8201;a convenient way of
grouping together (and encapsulating) related items. Structs translate to
classes in object-oriented languages.</p></div>
<div class="paragraph"><p>Thrift的结构体和 <span class="monospaced">C</span> 中的结构体在概念上很类似&#8201;&#8212;&#8201;都是一种将其他单位组合起来的方式.
结构体会被转换成面向对象语言中的类.</p></div>
<div class="paragraph"><p>Exceptions are syntactically and functionally equivalent to structs except that
they are declared using the <span class="monospaced">exception</span> keyword instead of the <span class="monospaced">struct</span> keyword.
They differ from structs in semantics&#8201;&#8212;&#8201;when defining RPC services, developers
may declare that a remote method throws an exception.</p></div>
<div class="paragraph"><p>除了使用关键字 <span class="monospaced">exception</span> 进行声明之外, 异常在语法上和功能上类似于结构体.
但是他们在语义上与结构体是有区别的&#8201;&#8212;&#8201;当定义RPC服务是, 开发者可以
定义一个会抛出异常的远程方法.</p></div>
<div class="paragraph"><p><a href="#_defining_structs">后续章节</a>会介绍如何定义结构体和异常.</p></div>
<div class="paragraph"><p>Details on defining structs and exceptions are the subject of a
<a href="#_defining_structs">later section</a>.</p></div>
</div>
<div class="sect3">
<h4 id="_services_服务">Services 服务</h4>
<div class="paragraph"><p>Service definitions are semantically equivalent to defining an <span class="monospaced">interface</span> (or a
pure virtual abstract class) in object-oriented programming. The Thrift compiler
generates fully functional client and server stubs that implement the interface.</p></div>
<div class="paragraph"><p>服务定义在语义上类似于面向对象语言中的 <span class="monospaced">接口</span> (或者纯虚抽象类).
Thrift编译器会生成包含接口所有功能的的客户端和服务器桩.</p></div>
<div class="paragraph"><p><a href="#_defining_services">后续章节</a>会介绍如何定义服务.</p></div>
<div class="paragraph"><p>Details on defining services are the subject of a <a href="#_defining_services">later section</a>.</p></div>
</div>
</div>
<div class="sect2">
<h3 id="_typedefs_类型定义">Typedefs 类型定义</h3>
<div class="paragraph"><p>Thrift supports C/C++ style typedefs.</p></div>
<div class="paragraph"><p>Thrift支持C/C++风格的类型定义.</p></div>
<div class="listingblock">
<div class="content"><div class="highlight"><pre><span></span><span class="k">typedef</span> <span class="n">i32</span> <span class="n">MyInteger</span>   <span class="c1">// <img alt="1" src="data:image/png;base64,
iVBORw0KGgoAAAANSUhEUgAAAAwAAAAMCAAAAABzHgM7AAAAAmJLR0QAAKqNIzIAAABjSURBVHja
VY6xDcAwCAS/pPQaLim9QmajdOk2I2SNrMEIlARIoigU8Cek/4e7zdHaWOYOVwaoA6wOCw05Y7FB
gE0tIWQ+sBcwKM8qoD/wB5wGL8hjfdzWrh01GRp1hInGjDoXwHgsFuzBVLQAAABDdEVYdFNvZnR3
YXJlAEAoIylJbWFnZU1hZ2ljayA0LjIuOCA5OS8wOC8wMSBjcmlzdHlAbXlzdGljLmVzLmR1cG9u
dC5jb22RuiG4AAAAKnRFWHRTaWduYXR1cmUANThhMDcyZTA3MGRhMjJmNjEzNWNiZDNlNDE0NTQ2
ZjloaiHtAAAADnRFWHRQYWdlADEyeDEyKzArMIRtu30AAAAASUVORK5CYII="></span>
<span class="k">typedef</span> <span class="n">Tweet</span> <span class="n">ReTweet</span>   <span class="c1">// <img alt="2" src="data:image/png;base64,
iVBORw0KGgoAAAANSUhEUgAAAAwAAAAMCAAAAABzHgM7AAAAAmJLR0QAAKqNIzIAAAB7SURBVHja
HY6hFcMwDEQ/NDQsNSwU9Apdo7Cw0CsIBoZmhKzQEQJLDQsFVclHpHu693W429Zr7bu541Pg3kCm
Y0K75u9TEUPhuGgWU4mQDvieEaSQEnsT6zKPeZY0EUNtrHMCXvYUuSUg0PsMjUSvpysUT6OOSil9
izp/VNk1YJ8vf6MAAABDdEVYdFNvZnR3YXJlAEAoIylJbWFnZU1hZ2ljayA0LjIuOCA5OS8wOC8w
MSBjcmlzdHlAbXlzdGljLmVzLmR1cG9udC5jb22RuiG4AAAAKnRFWHRTaWduYXR1cmUAODBlYWU1
MjljOTRhN2Y0N2RlY2NmYWRhMjhhY2I5ZGblb7ENAAAADnRFWHRQYWdlADEyeDEyKzArMIRtu30A
AAAASUVORK5CYII="></span>
</pre></div></div></div>
<div class="colist arabic"><table>
<tr><td><img alt="1" src="data:image/png;base64, iVBORw0KGgoAAAANSUhEUgAAAAwAAAAMCAAAAABzHgM7AAAAAmJLR0QAAKqNIzIAAABjSURBVHja
VY6xDcAwCAS/pPQaLim9QmajdOk2I2SNrMEIlARIoigU8Cek/4e7zdHaWOYOVwaoA6wOCw05Y7FB
gE0tIWQ+sBcwKM8qoD/wB5wGL8hjfdzWrh01GRp1hInGjDoXwHgsFuzBVLQAAABDdEVYdFNvZnR3
YXJlAEAoIylJbWFnZU1hZ2ljayA0LjIuOCA5OS8wOC8wMSBjcmlzdHlAbXlzdGljLmVzLmR1cG9u
dC5jb22RuiG4AAAAKnRFWHRTaWduYXR1cmUANThhMDcyZTA3MGRhMjJmNjEzNWNiZDNlNDE0NTQ2
ZjloaiHtAAAADnRFWHRQYWdlADEyeDEyKzArMIRtu30AAAAASUVORK5CYII="></td><td>
注意没有结尾分号 Note there is no trailing semi-colon
</td></tr>
<tr><td><img alt="2" src="data:image/png;base64, iVBORw0KGgoAAAANSUhEUgAAAAwAAAAMCAAAAABzHgM7AAAAAmJLR0QAAKqNIzIAAAB7SURBVHja
HY6hFcMwDEQ/NDQsNSwU9Apdo7Cw0CsIBoZmhKzQEQJLDQsFVclHpHu693W429Zr7bu541Pg3kCm
Y0K75u9TEUPhuGgWU4mQDvieEaSQEnsT6zKPeZY0EUNtrHMCXvYUuSUg0PsMjUSvpysUT6OOSil9
izp/VNk1YJ8vf6MAAABDdEVYdFNvZnR3YXJlAEAoIylJbWFnZU1hZ2ljayA0LjIuOCA5OS8wOC8w
MSBjcmlzdHlAbXlzdGljLmVzLmR1cG9udC5jb22RuiG4AAAAKnRFWHRTaWduYXR1cmUAODBlYWU1
MjljOTRhN2Y0N2RlY2NmYWRhMjhhY2I5ZGblb7ENAAAADnRFWHRQYWdlADEyeDEyKzArMIRtu30A
AAAASUVORK5CYII="></td><td>
结构体也可用于类型定义 Structs can also be used in typedefs
</td></tr>
</table></div>
</div>
<div class="sect2">
<h3 id="_enums_枚举">Enums 枚举</h3>
<div class="paragraph"><p>When you&#8217;re defining a message type, you might want one of its fields to only
have one of a pre-defined list of values. For example, let&#8217;s say you want to add
a <span class="monospaced">tweetType</span> field for each <span class="monospaced">Tweet</span>, where the <span class="monospaced">tweetType</span> can be
<span class="monospaced">TWEET</span>, <span class="monospaced">RETWEET</span>, <span class="monospaced">DM</span>, or <span class="monospaced">REPLY</span>. You can do this very simply by
adding an enum to your message definition&#8201;&#8212;&#8201;a field with an enum type can only
have one of a specified set of constants as its value (if you try to provide a
different value, the parser will treat it like an unknown field). In the
following example we&#8217;ve added an enum called <span class="monospaced">TweetType</span> with all the possible
values, and a field of the same type:</p></div>
<div class="paragraph"><p>在你定义消息类型的时候, 你可能会希望其中的一个域从某个预定义的列表中取值.
比如, 你想在给每个 <span class="monospaced">Tweet</span> 加一个 <span class="monospaced">tweetType</span>. 这个 <span class="monospaced">tweetType</span> 的取值可以是
<span class="monospaced">TWEET</span>, <span class="monospaced">RETWEET</span>, <span class="monospaced">DM</span>, or <span class="monospaced">REPLY</span> 之一. 你可以通过在你的消息定义中添加
一个枚举类型&#8201;&#8212;&#8201;枚举类型的值只能是特定的常数集合中的某一元素.(如果你赋予一个集合之外的值,
编译器会认为其实一个未知域). 在接下来的例子中, 我们添加了名为 <span class="monospaced">TweetType</span> 枚举类型
并包含所有值.</p></div>
<div class="listingblock">
<div class="content"><div class="highlight"><pre><span></span><span class="k">enum</span> <span class="n">TweetType</span> <span class="p">{</span>
    <span class="n">TWEET</span><span class="p">,</span>       <span class="c1">// <img alt="1" src="data:image/png;base64,
iVBORw0KGgoAAAANSUhEUgAAAAwAAAAMCAAAAABzHgM7AAAAAmJLR0QAAKqNIzIAAABjSURBVHja
VY6xDcAwCAS/pPQaLim9QmajdOk2I2SNrMEIlARIoigU8Cek/4e7zdHaWOYOVwaoA6wOCw05Y7FB
gE0tIWQ+sBcwKM8qoD/wB5wGL8hjfdzWrh01GRp1hInGjDoXwHgsFuzBVLQAAABDdEVYdFNvZnR3
YXJlAEAoIylJbWFnZU1hZ2ljayA0LjIuOCA5OS8wOC8wMSBjcmlzdHlAbXlzdGljLmVzLmR1cG9u
dC5jb22RuiG4AAAAKnRFWHRTaWduYXR1cmUANThhMDcyZTA3MGRhMjJmNjEzNWNiZDNlNDE0NTQ2
ZjloaiHtAAAADnRFWHRQYWdlADEyeDEyKzArMIRtu30AAAAASUVORK5CYII="></span>
    <span class="n">RETWEET</span> <span class="o">=</span> <span class="mi">2</span><span class="p">,</span> <span class="c1">// <img alt="2" src="data:image/png;base64,
iVBORw0KGgoAAAANSUhEUgAAAAwAAAAMCAAAAABzHgM7AAAAAmJLR0QAAKqNIzIAAAB7SURBVHja
HY6hFcMwDEQ/NDQsNSwU9Apdo7Cw0CsIBoZmhKzQEQJLDQsFVclHpHu693W429Zr7bu541Pg3kCm
Y0K75u9TEUPhuGgWU4mQDvieEaSQEnsT6zKPeZY0EUNtrHMCXvYUuSUg0PsMjUSvpysUT6OOSil9
izp/VNk1YJ8vf6MAAABDdEVYdFNvZnR3YXJlAEAoIylJbWFnZU1hZ2ljayA0LjIuOCA5OS8wOC8w
MSBjcmlzdHlAbXlzdGljLmVzLmR1cG9udC5jb22RuiG4AAAAKnRFWHRTaWduYXR1cmUAODBlYWU1
MjljOTRhN2Y0N2RlY2NmYWRhMjhhY2I5ZGblb7ENAAAADnRFWHRQYWdlADEyeDEyKzArMIRtu30A
AAAASUVORK5CYII="></span>
    <span class="n">DM</span> <span class="o">=</span> <span class="mh">0xa</span><span class="p">,</span>    <span class="c1">// <img alt="3" src="data:image/png;base64,
iVBORw0KGgoAAAANSUhEUgAAAAwAAAAMCAAAAABzHgM7AAAAAmJLR0QAAKqNIzIAAAB4SURBVHja
JU6rFcNADBM09BqBhl6ltDCwKxQeDOwKB7tGYGCoYaChK6cmlt7TD1W5uap/sgoVBnEXWBTSoOdx
7gpLDOAVorWC0ABdcBPqwZtx8Muf+DPXJpQ96Nu/LSMYl/n17oCOnplTOrpiwW3sUs4ZJmob5/wA
Ubg1Y/zrjUwAAABDdEVYdFNvZnR3YXJlAEAoIylJbWFnZU1hZ2ljayA0LjIuOCA5OS8wOC8wMSBj
cmlzdHlAbXlzdGljLmVzLmR1cG9udC5jb22RuiG4AAAAKnRFWHRTaWduYXR1cmUAODBiYmRhMjcy
NmRkYWNlOGFiOGEwMWY1OWRlMmViZGII/Q51AAAADnRFWHRQYWdlADEyeDEyKzArMIRtu30AAAAA
SUVORK5CYII="></span>
    <span class="n">REPLY</span>
<span class="p">}</span>                <span class="c1">// <img alt="4" src="data:image/png;base64,
iVBORw0KGgoAAAANSUhEUgAAAAwAAAAMCAAAAABzHgM7AAAAAmJLR0QAAKqNIzIAAABzSURBVHja
HY0hEoUwEEMjkZVYZGVlr1CJxCKRXKPyy28reyVsZeXKsCFi573ZzAQk+x5jaQ6gFQAxIA8XceEN
ZEN3DkOCH/TobUoSVuAYwSSLyzbvaHWVFJxUmmp+PF+twrLkuXzLwPmZ8+OjtH8KS6pGvuoGNo5b
6rzDAAAAQ3RFWHRTb2Z0d2FyZQBAKCMpSW1hZ2VNYWdpY2sgNC4yLjggOTkvMDgvMDEgY3Jpc3R5
QG15c3RpYy5lcy5kdXBvbnQuY29tkbohuAAAACp0RVh0U2lnbmF0dXJlADlmODJmY2FjOWUwMzlj
YmRiNzIzODBhNDU5MTMyNGY1gLv4dgAAAA50RVh0UGFnZQAxMngxMiswKzCEbbt9AAAAAElFTkSu
QmCC"></span>

<span class="k">struct</span> <span class="n">Tweet</span> <span class="p">{</span>
    <span class="mi">1</span><span class="o">:</span> <span class="n">required</span> <span class="n">i32</span> <span class="n">userId</span><span class="p">;</span>
    <span class="mi">2</span><span class="o">:</span> <span class="n">required</span> <span class="n">string</span> <span class="n">userName</span><span class="p">;</span>
    <span class="mi">3</span><span class="o">:</span> <span class="n">required</span> <span class="n">string</span> <span class="n">text</span><span class="p">;</span>
    <span class="mi">4</span><span class="o">:</span> <span class="n">optional</span> <span class="n">Location</span> <span class="n">loc</span><span class="p">;</span>
    <span class="mi">5</span><span class="o">:</span> <span class="n">optional</span> <span class="n">TweetType</span> <span class="n">tweetType</span> <span class="o">=</span> <span class="n">TweetType</span><span class="p">.</span><span class="n">TWEET</span> <span class="c1">// <img alt="5" src="data:image/png;base64,
iVBORw0KGgoAAAANSUhEUgAAAAwAAAAMCAAAAABzHgM7AAAAAmJLR0QAAKqNIzIAAAB2SURBVHja
FY6hEcQwDAQPChqGGhoaqgWX8PUYBhqGBn4rX0JooKDh/UlsZ3b2BJKXH8XPTYLh1lpt1h+BwxkR
A23jhsCQd2IkfH9T3HEkzPFegCXUKSUSpJUPsN7UFOgc9VkZUBoz9l0yrVHZarUcJZeb9XznDyNb
Ny9CX3/7AAAAQ3RFWHRTb2Z0d2FyZQBAKCMpSW1hZ2VNYWdpY2sgNC4yLjggOTkvMDgvMDEgY3Jp
c3R5QG15c3RpYy5lcy5kdXBvbnQuY29tkbohuAAAACp0RVh0U2lnbmF0dXJlAGZlNjkwNDYzMzc5
ZWIyNWU1NjJmY2M4Y2M5YjNjN2Uw37I5ngAAAA50RVh0UGFnZQAxMngxMiswKzCEbbt9AAAAAElF
TkSuQmCC"></span>
    <span class="mi">16</span><span class="o">:</span> <span class="n">optional</span> <span class="n">string</span> <span class="n">language</span> <span class="o">=</span> <span class="s">&quot;english&quot;</span>
<span class="p">}</span>
</pre></div></div></div>
<div class="colist arabic"><table>
<tr><td><img alt="1" src="data:image/png;base64, iVBORw0KGgoAAAANSUhEUgAAAAwAAAAMCAAAAABzHgM7AAAAAmJLR0QAAKqNIzIAAABjSURBVHja
VY6xDcAwCAS/pPQaLim9QmajdOk2I2SNrMEIlARIoigU8Cek/4e7zdHaWOYOVwaoA6wOCw05Y7FB
gE0tIWQ+sBcwKM8qoD/wB5wGL8hjfdzWrh01GRp1hInGjDoXwHgsFuzBVLQAAABDdEVYdFNvZnR3
YXJlAEAoIylJbWFnZU1hZ2ljayA0LjIuOCA5OS8wOC8wMSBjcmlzdHlAbXlzdGljLmVzLmR1cG9u
dC5jb22RuiG4AAAAKnRFWHRTaWduYXR1cmUANThhMDcyZTA3MGRhMjJmNjEzNWNiZDNlNDE0NTQ2
ZjloaiHtAAAADnRFWHRQYWdlADEyeDEyKzArMIRtu30AAAAASUVORK5CYII="></td><td>
类似于C风格的枚举类型, 编译器默认从0开始赋值. Enums are specified C-style. Compiler assigns default values starting at 0.
</td></tr>
<tr><td><img alt="2" src="data:image/png;base64, iVBORw0KGgoAAAANSUhEUgAAAAwAAAAMCAAAAABzHgM7AAAAAmJLR0QAAKqNIzIAAAB7SURBVHja
HY6hFcMwDEQ/NDQsNSwU9Apdo7Cw0CsIBoZmhKzQEQJLDQsFVclHpHu693W429Zr7bu541Pg3kCm
Y0K75u9TEUPhuGgWU4mQDvieEaSQEnsT6zKPeZY0EUNtrHMCXvYUuSUg0PsMjUSvpysUT6OOSil9
izp/VNk1YJ8vf6MAAABDdEVYdFNvZnR3YXJlAEAoIylJbWFnZU1hZ2ljayA0LjIuOCA5OS8wOC8w
MSBjcmlzdHlAbXlzdGljLmVzLmR1cG9udC5jb22RuiG4AAAAKnRFWHRTaWduYXR1cmUAODBlYWU1
MjljOTRhN2Y0N2RlY2NmYWRhMjhhY2I5ZGblb7ENAAAADnRFWHRQYWdlADEyeDEyKzArMIRtu30A
AAAASUVORK5CYII="></td><td>
当然, 也可以给常数提供特定的值. You can of course, supply specific integral values for constants.
</td></tr>
<tr><td><img alt="3" src="data:image/png;base64, iVBORw0KGgoAAAANSUhEUgAAAAwAAAAMCAAAAABzHgM7AAAAAmJLR0QAAKqNIzIAAAB4SURBVHja
JU6rFcNADBM09BqBhl6ltDCwKxQeDOwKB7tGYGCoYaChK6cmlt7TD1W5uap/sgoVBnEXWBTSoOdx
7gpLDOAVorWC0ABdcBPqwZtx8Muf+DPXJpQ96Nu/LSMYl/n17oCOnplTOrpiwW3sUs4ZJmob5/wA
Ubg1Y/zrjUwAAABDdEVYdFNvZnR3YXJlAEAoIylJbWFnZU1hZ2ljayA0LjIuOCA5OS8wOC8wMSBj
cmlzdHlAbXlzdGljLmVzLmR1cG9udC5jb22RuiG4AAAAKnRFWHRTaWduYXR1cmUAODBiYmRhMjcy
NmRkYWNlOGFiOGEwMWY1OWRlMmViZGII/Q51AAAADnRFWHRQYWdlADEyeDEyKzArMIRtu30AAAAA
SUVORK5CYII="></td><td>
可以接受16进制. Hex values are also acceptable.
</td></tr>
<tr><td><img alt="4" src="data:image/png;base64, iVBORw0KGgoAAAANSUhEUgAAAAwAAAAMCAAAAABzHgM7AAAAAmJLR0QAAKqNIzIAAABzSURBVHja
HY0hEoUwEEMjkZVYZGVlr1CJxCKRXKPyy28reyVsZeXKsCFi573ZzAQk+x5jaQ6gFQAxIA8XceEN
ZEN3DkOCH/TobUoSVuAYwSSLyzbvaHWVFJxUmmp+PF+twrLkuXzLwPmZ8+OjtH8KS6pGvuoGNo5b
6rzDAAAAQ3RFWHRTb2Z0d2FyZQBAKCMpSW1hZ2VNYWdpY2sgNC4yLjggOTkvMDgvMDEgY3Jpc3R5
QG15c3RpYy5lcy5kdXBvbnQuY29tkbohuAAAACp0RVh0U2lnbmF0dXJlADlmODJmY2FjOWUwMzlj
YmRiNzIzODBhNDU5MTMyNGY1gLv4dgAAAA50RVh0UGFnZQAxMngxMiswKzCEbbt9AAAAAElFTkSu
QmCC"></td><td>
没有结尾分号. Again notice no trailing semi-colon
</td></tr>
<tr><td><img alt="5" src="data:image/png;base64, iVBORw0KGgoAAAANSUhEUgAAAAwAAAAMCAAAAABzHgM7AAAAAmJLR0QAAKqNIzIAAAB2SURBVHja
FY6hEcQwDAQPChqGGhoaqgWX8PUYBhqGBn4rX0JooKDh/UlsZ3b2BJKXH8XPTYLh1lpt1h+BwxkR
A23jhsCQd2IkfH9T3HEkzPFegCXUKSUSpJUPsN7UFOgc9VkZUBoz9l0yrVHZarUcJZeb9XznDyNb
Ny9CX3/7AAAAQ3RFWHRTb2Z0d2FyZQBAKCMpSW1hZ2VNYWdpY2sgNC4yLjggOTkvMDgvMDEgY3Jp
c3R5QG15c3RpYy5lcy5kdXBvbnQuY29tkbohuAAAACp0RVh0U2lnbmF0dXJlAGZlNjkwNDYzMzc5
ZWIyNWU1NjJmY2M4Y2M5YjNjN2Uw37I5ngAAAA50RVh0UGFnZQAxMngxMiswKzCEbbt9AAAAAElF
TkSuQmCC"></td><td>
使用全限定名称来赋值. Use the fully qualified name of the constant when assigning default values.
</td></tr>
</table></div>
<div class="paragraph"><p>Note that unlike Protocol Buffers, Thrift does NOT yet support nested enums (or
structs, for that matter).</p></div>
<div class="paragraph"><p>注意, 不像Protocol Buffers, Thrift暂不支持枚举嵌套枚举(或其他结构体).</p></div>
<div class="paragraph"><p>Enumerator constants MUST be in the range of <em>positive</em> 32-bit integers.</p></div>
<div class="paragraph"><p>枚举常数必须是 <em>正</em> 32位整数.</p></div>
</div>
<div class="sect2">
<h3 id="_comments_注释">Comments 注释</h3>
<div class="paragraph"><p>Thrift supports shell-style, C-style multi-line as well as single-line Java/C++
style comments.</p></div>
<div class="paragraph"><p>Thrift支持shell风格, C风格多行和Java/C++风格的单行注释.</p></div>
<div class="listingblock">
<div class="content"><div class="highlight"><pre><span></span><span class="cp"># This is a valid comment.</span>

<span class="cm">/*</span>
<span class="cm"> * This is a multi-line comment.</span>
<span class="cm"> * Just like in C.</span>
<span class="cm"> */</span>

<span class="c1">// C++/Java style single-line comments work just as well.</span>
</pre></div></div></div>
</div>
<div class="sect2">
<h3 id="_namespaces_命名空间">Namespaces 命名空间</h3>
<div class="paragraph"><p>Namespaces in Thrift are akin to namespaces in C++ or packages in Java&#8201;&#8212;&#8201;they
offer a convenient way of organizing (or isolating) your code. Namespaces may
also be used to prevent name clashes between type definitions.</p></div>
<div class="paragraph"><p>Thrift的命名空间与C++的命名空间或者Java中的包类似&#8201;&#8212;&#8201;都是为了一种组织(或者隔离)代码的方式.
命名空间也可以避免类型定义的命名冲突.</p></div>
<div class="paragraph"><p>Because each language has its own package-like mechanisms (e.g. Python has
modules), Thrift allows you to customize the namespace behavior on a
per-language basis:</p></div>
<div class="paragraph"><p>因为每种语言都有自己类似于包的机制(例如Python的模块). Thrift允许你给不同语言
来定义不同的命名空间.</p></div>
<div class="listingblock">
<div class="content"><div class="highlight"><pre><span></span><span class="k">namespace</span> <span class="n">cpp</span> <span class="n">com</span><span class="p">.</span><span class="n">example</span><span class="p">.</span><span class="n">project</span>  <span class="c1">// <img alt="1" src="data:image/png;base64,
iVBORw0KGgoAAAANSUhEUgAAAAwAAAAMCAAAAABzHgM7AAAAAmJLR0QAAKqNIzIAAABjSURBVHja
VY6xDcAwCAS/pPQaLim9QmajdOk2I2SNrMEIlARIoigU8Cek/4e7zdHaWOYOVwaoA6wOCw05Y7FB
gE0tIWQ+sBcwKM8qoD/wB5wGL8hjfdzWrh01GRp1hInGjDoXwHgsFuzBVLQAAABDdEVYdFNvZnR3
YXJlAEAoIylJbWFnZU1hZ2ljayA0LjIuOCA5OS8wOC8wMSBjcmlzdHlAbXlzdGljLmVzLmR1cG9u
dC5jb22RuiG4AAAAKnRFWHRTaWduYXR1cmUANThhMDcyZTA3MGRhMjJmNjEzNWNiZDNlNDE0NTQ2
ZjloaiHtAAAADnRFWHRQYWdlADEyeDEyKzArMIRtu30AAAAASUVORK5CYII="></span>
<span class="k">namespace</span> <span class="n">java</span> <span class="n">com</span><span class="p">.</span><span class="n">example</span><span class="p">.</span><span class="n">project</span> <span class="c1">// <img alt="2" src="data:image/png;base64,
iVBORw0KGgoAAAANSUhEUgAAAAwAAAAMCAAAAABzHgM7AAAAAmJLR0QAAKqNIzIAAAB7SURBVHja
HY6hFcMwDEQ/NDQsNSwU9Apdo7Cw0CsIBoZmhKzQEQJLDQsFVclHpHu693W429Zr7bu541Pg3kCm
Y0K75u9TEUPhuGgWU4mQDvieEaSQEnsT6zKPeZY0EUNtrHMCXvYUuSUg0PsMjUSvpysUT6OOSil9
izp/VNk1YJ8vf6MAAABDdEVYdFNvZnR3YXJlAEAoIylJbWFnZU1hZ2ljayA0LjIuOCA5OS8wOC8w
MSBjcmlzdHlAbXlzdGljLmVzLmR1cG9udC5jb22RuiG4AAAAKnRFWHRTaWduYXR1cmUAODBlYWU1
MjljOTRhN2Y0N2RlY2NmYWRhMjhhY2I5ZGblb7ENAAAADnRFWHRQYWdlADEyeDEyKzArMIRtu30A
AAAASUVORK5CYII="></span>
</pre></div></div></div>
<div class="colist arabic"><table>
<tr><td><img alt="1" src="data:image/png;base64, iVBORw0KGgoAAAANSUhEUgAAAAwAAAAMCAAAAABzHgM7AAAAAmJLR0QAAKqNIzIAAABjSURBVHja
VY6xDcAwCAS/pPQaLim9QmajdOk2I2SNrMEIlARIoigU8Cek/4e7zdHaWOYOVwaoA6wOCw05Y7FB
gE0tIWQ+sBcwKM8qoD/wB5wGL8hjfdzWrh01GRp1hInGjDoXwHgsFuzBVLQAAABDdEVYdFNvZnR3
YXJlAEAoIylJbWFnZU1hZ2ljayA0LjIuOCA5OS8wOC8wMSBjcmlzdHlAbXlzdGljLmVzLmR1cG9u
dC5jb22RuiG4AAAAKnRFWHRTaWduYXR1cmUANThhMDcyZTA3MGRhMjJmNjEzNWNiZDNlNDE0NTQ2
ZjloaiHtAAAADnRFWHRQYWdlADEyeDEyKzArMIRtu30AAAAASUVORK5CYII="></td><td>
Translates to <span class="monospaced">namespace com { namespace example { namespace project {</span>
</td></tr>
<tr><td><img alt="2" src="data:image/png;base64, iVBORw0KGgoAAAANSUhEUgAAAAwAAAAMCAAAAABzHgM7AAAAAmJLR0QAAKqNIzIAAAB7SURBVHja
HY6hFcMwDEQ/NDQsNSwU9Apdo7Cw0CsIBoZmhKzQEQJLDQsFVclHpHu693W429Zr7bu541Pg3kCm
Y0K75u9TEUPhuGgWU4mQDvieEaSQEnsT6zKPeZY0EUNtrHMCXvYUuSUg0PsMjUSvpysUT6OOSil9
izp/VNk1YJ8vf6MAAABDdEVYdFNvZnR3YXJlAEAoIylJbWFnZU1hZ2ljayA0LjIuOCA5OS8wOC8w
MSBjcmlzdHlAbXlzdGljLmVzLmR1cG9udC5jb22RuiG4AAAAKnRFWHRTaWduYXR1cmUAODBlYWU1
MjljOTRhN2Y0N2RlY2NmYWRhMjhhY2I5ZGblb7ENAAAADnRFWHRQYWdlADEyeDEyKzArMIRtu30A
AAAASUVORK5CYII="></td><td>
Translates to <span class="monospaced">package com.example.project</span>
</td></tr>
</table></div>
</div>
<div class="sect2">
<h3 id="_includes_文件包含">Includes 文件包含</h3>
<div class="paragraph"><p>It is often useful to split up Thrift definitions in separate files to ease
maintainance, enable reuse and improve modularity/organization. Thrift allows
files to <em>include</em> other Thrift files. Included files are looked up in the
current directory and by searching relative to any paths specified with the <span class="monospaced">-I</span>
compiler flag.</p></div>
<div class="paragraph"><p>将Thrift的定义分散到不同的文件以便于维护, 重用以及提升模块化和组织.
Thrift文件允许 <em>包含</em> 其他的Thrift文件. 被包含的文件会在当前目录和由 <span class="monospaced">-I</span> 参数制定的
相对路径下进行查找.</p></div>
<div class="paragraph"><p>Included objects are accessed using the name of the Thrift file as a prefix.
被包含的对象需要使用Thrift文件名作为前缀来访问.</p></div>
<div class="listingblock">
<div class="content"><div class="highlight"><pre><span></span><span class="n">include</span> <span class="s">&quot;tweet.thrift&quot;</span>           <span class="c1">// <img alt="1" src="data:image/png;base64,
iVBORw0KGgoAAAANSUhEUgAAAAwAAAAMCAAAAABzHgM7AAAAAmJLR0QAAKqNIzIAAABjSURBVHja
VY6xDcAwCAS/pPQaLim9QmajdOk2I2SNrMEIlARIoigU8Cek/4e7zdHaWOYOVwaoA6wOCw05Y7FB
gE0tIWQ+sBcwKM8qoD/wB5wGL8hjfdzWrh01GRp1hInGjDoXwHgsFuzBVLQAAABDdEVYdFNvZnR3
YXJlAEAoIylJbWFnZU1hZ2ljayA0LjIuOCA5OS8wOC8wMSBjcmlzdHlAbXlzdGljLmVzLmR1cG9u
dC5jb22RuiG4AAAAKnRFWHRTaWduYXR1cmUANThhMDcyZTA3MGRhMjJmNjEzNWNiZDNlNDE0NTQ2
ZjloaiHtAAAADnRFWHRQYWdlADEyeDEyKzArMIRtu30AAAAASUVORK5CYII="></span>
<span class="p">...</span>
<span class="k">struct</span> <span class="n">TweetSearchResult</span> <span class="p">{</span>
    <span class="mi">1</span><span class="o">:</span> <span class="n">list</span><span class="o">&lt;</span><span class="n">tweet</span><span class="p">.</span><span class="n">Tweet</span><span class="o">&gt;</span> <span class="n">tweets</span><span class="p">;</span> <span class="c1">// <img alt="2" src="data:image/png;base64,
iVBORw0KGgoAAAANSUhEUgAAAAwAAAAMCAAAAABzHgM7AAAAAmJLR0QAAKqNIzIAAAB7SURBVHja
HY6hFcMwDEQ/NDQsNSwU9Apdo7Cw0CsIBoZmhKzQEQJLDQsFVclHpHu693W429Zr7bu541Pg3kCm
Y0K75u9TEUPhuGgWU4mQDvieEaSQEnsT6zKPeZY0EUNtrHMCXvYUuSUg0PsMjUSvpysUT6OOSil9
izp/VNk1YJ8vf6MAAABDdEVYdFNvZnR3YXJlAEAoIylJbWFnZU1hZ2ljayA0LjIuOCA5OS8wOC8w
MSBjcmlzdHlAbXlzdGljLmVzLmR1cG9udC5jb22RuiG4AAAAKnRFWHRTaWduYXR1cmUAODBlYWU1
MjljOTRhN2Y0N2RlY2NmYWRhMjhhY2I5ZGblb7ENAAAADnRFWHRQYWdlADEyeDEyKzArMIRtu30A
AAAASUVORK5CYII="></span>
<span class="p">}</span>
</pre></div></div></div>
<div class="colist arabic"><table>
<tr><td><img alt="1" src="data:image/png;base64, iVBORw0KGgoAAAANSUhEUgAAAAwAAAAMCAAAAABzHgM7AAAAAmJLR0QAAKqNIzIAAABjSURBVHja
VY6xDcAwCAS/pPQaLim9QmajdOk2I2SNrMEIlARIoigU8Cek/4e7zdHaWOYOVwaoA6wOCw05Y7FB
gE0tIWQ+sBcwKM8qoD/wB5wGL8hjfdzWrh01GRp1hInGjDoXwHgsFuzBVLQAAABDdEVYdFNvZnR3
YXJlAEAoIylJbWFnZU1hZ2ljayA0LjIuOCA5OS8wOC8wMSBjcmlzdHlAbXlzdGljLmVzLmR1cG9u
dC5jb22RuiG4AAAAKnRFWHRTaWduYXR1cmUANThhMDcyZTA3MGRhMjJmNjEzNWNiZDNlNDE0NTQ2
ZjloaiHtAAAADnRFWHRQYWdlADEyeDEyKzArMIRtu30AAAAASUVORK5CYII="></td><td>
文件需要使用引号包含, 结尾没有分号. File names must be quoted; again notice the absent semi-colon.
</td></tr>
<tr><td><img alt="2" src="data:image/png;base64, iVBORw0KGgoAAAANSUhEUgAAAAwAAAAMCAAAAABzHgM7AAAAAmJLR0QAAKqNIzIAAAB7SURBVHja
HY6hFcMwDEQ/NDQsNSwU9Apdo7Cw0CsIBoZmhKzQEQJLDQsFVclHpHu693W429Zr7bu541Pg3kCm
Y0K75u9TEUPhuGgWU4mQDvieEaSQEnsT6zKPeZY0EUNtrHMCXvYUuSUg0PsMjUSvpysUT6OOSil9
izp/VNk1YJ8vf6MAAABDdEVYdFNvZnR3YXJlAEAoIylJbWFnZU1hZ2ljayA0LjIuOCA5OS8wOC8w
MSBjcmlzdHlAbXlzdGljLmVzLmR1cG9udC5jb22RuiG4AAAAKnRFWHRTaWduYXR1cmUAODBlYWU1
MjljOTRhN2Y0N2RlY2NmYWRhMjhhY2I5ZGblb7ENAAAADnRFWHRQYWdlADEyeDEyKzArMIRtu30A
AAAASUVORK5CYII="></td><td>
文件名前缀 <span class="monospaced">tweet</span> . Note the <span class="monospaced">tweet</span> prefix.
</td></tr>
</table></div>
</div>
<div class="sect2">
<h3 id="_constants_常数">Constants 常数</h3>
<div class="paragraph"><p>Thrift lets you define constants for use across languages. Complex types and
structs are specified using JSON notation.</p></div>
<div class="paragraph"><p>Thrift允许你定义跨语言的常数. 复杂的类型和结构体使用JSON表示法赋值.</p></div>
<div class="listingblock">
<div class="content"><div class="highlight"><pre><span></span><span class="k">const</span> <span class="n">i32</span> <span class="n">INT_CONST</span> <span class="o">=</span> <span class="mi">1234</span><span class="p">;</span>    <span class="c1">// <img alt="1" src="data:image/png;base64,
iVBORw0KGgoAAAANSUhEUgAAAAwAAAAMCAAAAABzHgM7AAAAAmJLR0QAAKqNIzIAAABjSURBVHja
VY6xDcAwCAS/pPQaLim9QmajdOk2I2SNrMEIlARIoigU8Cek/4e7zdHaWOYOVwaoA6wOCw05Y7FB
gE0tIWQ+sBcwKM8qoD/wB5wGL8hjfdzWrh01GRp1hInGjDoXwHgsFuzBVLQAAABDdEVYdFNvZnR3
YXJlAEAoIylJbWFnZU1hZ2ljayA0LjIuOCA5OS8wOC8wMSBjcmlzdHlAbXlzdGljLmVzLmR1cG9u
dC5jb22RuiG4AAAAKnRFWHRTaWduYXR1cmUANThhMDcyZTA3MGRhMjJmNjEzNWNiZDNlNDE0NTQ2
ZjloaiHtAAAADnRFWHRQYWdlADEyeDEyKzArMIRtu30AAAAASUVORK5CYII="></span>
<span class="k">const</span> <span class="n">map</span><span class="o">&lt;</span><span class="n">string</span><span class="p">,</span><span class="n">string</span><span class="o">&gt;</span> <span class="n">MAP_CONST</span> <span class="o">=</span> <span class="p">{</span><span class="s">&quot;hello&quot;</span><span class="o">:</span> <span class="s">&quot;world&quot;</span><span class="p">,</span> <span class="s">&quot;goodnight&quot;</span><span class="o">:</span> <span class="s">&quot;moon&quot;</span><span class="p">}</span>
</pre></div></div></div>
<div class="colist arabic"><table>
<tr><td><img alt="1" src="data:image/png;base64, iVBORw0KGgoAAAANSUhEUgAAAAwAAAAMCAAAAABzHgM7AAAAAmJLR0QAAKqNIzIAAABjSURBVHja
VY6xDcAwCAS/pPQaLim9QmajdOk2I2SNrMEIlARIoigU8Cek/4e7zdHaWOYOVwaoA6wOCw05Y7FB
gE0tIWQ+sBcwKM8qoD/wB5wGL8hjfdzWrh01GRp1hInGjDoXwHgsFuzBVLQAAABDdEVYdFNvZnR3
YXJlAEAoIylJbWFnZU1hZ2ljayA0LjIuOCA5OS8wOC8wMSBjcmlzdHlAbXlzdGljLmVzLmR1cG9u
dC5jb22RuiG4AAAAKnRFWHRTaWduYXR1cmUANThhMDcyZTA3MGRhMjJmNjEzNWNiZDNlNDE0NTQ2
ZjloaiHtAAAADnRFWHRQYWdlADEyeDEyKzArMIRtu30AAAAASUVORK5CYII="></td><td>
结尾分号可选, 允许16进制. Semi-colon is (confusingly) optional; hex values are valid here.
</td></tr>
</table></div>
</div>
<div class="sect2">
<h3 id="_defining_structs_定义结构体">Defining Structs 定义结构体</h3>
<div class="paragraph"><p>Structs (also known as <em>messages</em> in some systems) are the basic building blocks
in a Thrift IDL. A struct is composed of <em>fields</em>; each field has a unique
integer identifier, a type, a name and an optional default value.</p></div>
<div class="paragraph"><p>结构体(在一些系统中也称为'消息')是Thrift IDL的基本组成部分.
一个结构体由多个 <em>域</em> 组成; 每个域都由唯一的整数标示符, 类型, 名称以及一个可选的默认值组成.</p></div>
<div class="paragraph"><p>假设你想构建一个类Twitter的服务.</p></div>
<div class="paragraph"><p>Consider a simple example. Suppose you want to build a
<a href="http://twitter.com">Twitter</a>-like service. Here is how you might define a <span class="monospaced">Tweet</span>:</p></div>
<div class="listingblock">
<div class="content"><div class="highlight"><pre><span></span><span class="k">struct</span> <span class="n">Location</span> <span class="p">{</span>                            <span class="c1">// <img alt="5" src="data:image/png;base64,
iVBORw0KGgoAAAANSUhEUgAAAAwAAAAMCAAAAABzHgM7AAAAAmJLR0QAAKqNIzIAAAB2SURBVHja
FY6hEcQwDAQPChqGGhoaqgWX8PUYBhqGBn4rX0JooKDh/UlsZ3b2BJKXH8XPTYLh1lpt1h+BwxkR
A23jhsCQd2IkfH9T3HEkzPFegCXUKSUSpJUPsN7UFOgc9VkZUBoz9l0yrVHZarUcJZeb9XznDyNb
Ny9CX3/7AAAAQ3RFWHRTb2Z0d2FyZQBAKCMpSW1hZ2VNYWdpY2sgNC4yLjggOTkvMDgvMDEgY3Jp
c3R5QG15c3RpYy5lcy5kdXBvbnQuY29tkbohuAAAACp0RVh0U2lnbmF0dXJlAGZlNjkwNDYzMzc5
ZWIyNWU1NjJmY2M4Y2M5YjNjN2Uw37I5ngAAAA50RVh0UGFnZQAxMngxMiswKzCEbbt9AAAAAElF
TkSuQmCC"></span>
    <span class="mi">1</span><span class="o">:</span> <span class="n">required</span> <span class="kt">double</span> <span class="n">latitude</span><span class="p">;</span>
    <span class="mi">2</span><span class="o">:</span> <span class="n">required</span> <span class="kt">double</span> <span class="n">longitude</span><span class="p">;</span>
<span class="p">}</span>

<span class="k">struct</span> <span class="n">Tweet</span> <span class="p">{</span>
    <span class="mi">1</span><span class="o">:</span> <span class="n">required</span> <span class="n">i32</span> <span class="n">userId</span><span class="p">;</span>                  <span class="c1">// <img alt="1" src="data:image/png;base64,
iVBORw0KGgoAAAANSUhEUgAAAAwAAAAMCAAAAABzHgM7AAAAAmJLR0QAAKqNIzIAAABjSURBVHja
VY6xDcAwCAS/pPQaLim9QmajdOk2I2SNrMEIlARIoigU8Cek/4e7zdHaWOYOVwaoA6wOCw05Y7FB
gE0tIWQ+sBcwKM8qoD/wB5wGL8hjfdzWrh01GRp1hInGjDoXwHgsFuzBVLQAAABDdEVYdFNvZnR3
YXJlAEAoIylJbWFnZU1hZ2ljayA0LjIuOCA5OS8wOC8wMSBjcmlzdHlAbXlzdGljLmVzLmR1cG9u
dC5jb22RuiG4AAAAKnRFWHRTaWduYXR1cmUANThhMDcyZTA3MGRhMjJmNjEzNWNiZDNlNDE0NTQ2
ZjloaiHtAAAADnRFWHRQYWdlADEyeDEyKzArMIRtu30AAAAASUVORK5CYII="></span>
    <span class="mi">2</span><span class="o">:</span> <span class="n">required</span> <span class="n">string</span> <span class="n">userName</span><span class="p">;</span>             <span class="c1">// <img alt="2" src="data:image/png;base64,
iVBORw0KGgoAAAANSUhEUgAAAAwAAAAMCAAAAABzHgM7AAAAAmJLR0QAAKqNIzIAAAB7SURBVHja
HY6hFcMwDEQ/NDQsNSwU9Apdo7Cw0CsIBoZmhKzQEQJLDQsFVclHpHu693W429Zr7bu541Pg3kCm
Y0K75u9TEUPhuGgWU4mQDvieEaSQEnsT6zKPeZY0EUNtrHMCXvYUuSUg0PsMjUSvpysUT6OOSil9
izp/VNk1YJ8vf6MAAABDdEVYdFNvZnR3YXJlAEAoIylJbWFnZU1hZ2ljayA0LjIuOCA5OS8wOC8w
MSBjcmlzdHlAbXlzdGljLmVzLmR1cG9udC5jb22RuiG4AAAAKnRFWHRTaWduYXR1cmUAODBlYWU1
MjljOTRhN2Y0N2RlY2NmYWRhMjhhY2I5ZGblb7ENAAAADnRFWHRQYWdlADEyeDEyKzArMIRtu30A
AAAASUVORK5CYII="></span>
    <span class="mi">3</span><span class="o">:</span> <span class="n">required</span> <span class="n">string</span> <span class="n">text</span><span class="p">;</span>
    <span class="mi">4</span><span class="o">:</span> <span class="n">optional</span> <span class="n">Location</span> <span class="n">loc</span><span class="p">;</span>                <span class="c1">// <img alt="3" src="data:image/png;base64,
iVBORw0KGgoAAAANSUhEUgAAAAwAAAAMCAAAAABzHgM7AAAAAmJLR0QAAKqNIzIAAAB4SURBVHja
JU6rFcNADBM09BqBhl6ltDCwKxQeDOwKB7tGYGCoYaChK6cmlt7TD1W5uap/sgoVBnEXWBTSoOdx
7gpLDOAVorWC0ABdcBPqwZtx8Muf+DPXJpQ96Nu/LSMYl/n17oCOnplTOrpiwW3sUs4ZJmob5/wA
Ubg1Y/zrjUwAAABDdEVYdFNvZnR3YXJlAEAoIylJbWFnZU1hZ2ljayA0LjIuOCA5OS8wOC8wMSBj
cmlzdHlAbXlzdGljLmVzLmR1cG9udC5jb22RuiG4AAAAKnRFWHRTaWduYXR1cmUAODBiYmRhMjcy
NmRkYWNlOGFiOGEwMWY1OWRlMmViZGII/Q51AAAADnRFWHRQYWdlADEyeDEyKzArMIRtu30AAAAA
SUVORK5CYII="></span>
    <span class="mi">16</span><span class="o">:</span> <span class="n">optional</span> <span class="n">string</span> <span class="n">language</span> <span class="o">=</span> <span class="s">&quot;english&quot;</span> <span class="c1">// <img alt="4" src="data:image/png;base64,
iVBORw0KGgoAAAANSUhEUgAAAAwAAAAMCAAAAABzHgM7AAAAAmJLR0QAAKqNIzIAAABzSURBVHja
HY0hEoUwEEMjkZVYZGVlr1CJxCKRXKPyy28reyVsZeXKsCFi573ZzAQk+x5jaQ6gFQAxIA8XceEN
ZEN3DkOCH/TobUoSVuAYwSSLyzbvaHWVFJxUmmp+PF+twrLkuXzLwPmZ8+OjtH8KS6pGvuoGNo5b
6rzDAAAAQ3RFWHRTb2Z0d2FyZQBAKCMpSW1hZ2VNYWdpY2sgNC4yLjggOTkvMDgvMDEgY3Jpc3R5
QG15c3RpYy5lcy5kdXBvbnQuY29tkbohuAAAACp0RVh0U2lnbmF0dXJlADlmODJmY2FjOWUwMzlj
YmRiNzIzODBhNDU5MTMyNGY1gLv4dgAAAA50RVh0UGFnZQAxMngxMiswKzCEbbt9AAAAAElFTkSu
QmCC"></span>
<span class="p">}</span>
</pre></div></div></div>
<div class="colist arabic"><table>
<tr><td><img alt="1" src="data:image/png;base64, iVBORw0KGgoAAAANSUhEUgAAAAwAAAAMCAAAAABzHgM7AAAAAmJLR0QAAKqNIzIAAABjSURBVHja
VY6xDcAwCAS/pPQaLim9QmajdOk2I2SNrMEIlARIoigU8Cek/4e7zdHaWOYOVwaoA6wOCw05Y7FB
gE0tIWQ+sBcwKM8qoD/wB5wGL8hjfdzWrh01GRp1hInGjDoXwHgsFuzBVLQAAABDdEVYdFNvZnR3
YXJlAEAoIylJbWFnZU1hZ2ljayA0LjIuOCA5OS8wOC8wMSBjcmlzdHlAbXlzdGljLmVzLmR1cG9u
dC5jb22RuiG4AAAAKnRFWHRTaWduYXR1cmUANThhMDcyZTA3MGRhMjJmNjEzNWNiZDNlNDE0NTQ2
ZjloaiHtAAAADnRFWHRQYWdlADEyeDEyKzArMIRtu30AAAAASUVORK5CYII="></td><td>
每个域必须有一个唯一的正整数标示符. Every field <strong>must</strong> have a unique, positive integer identifier
</td></tr>
<tr><td><img alt="2" src="data:image/png;base64, iVBORw0KGgoAAAANSUhEUgAAAAwAAAAMCAAAAABzHgM7AAAAAmJLR0QAAKqNIzIAAAB7SURBVHja
HY6hFcMwDEQ/NDQsNSwU9Apdo7Cw0CsIBoZmhKzQEQJLDQsFVclHpHu693W429Zr7bu541Pg3kCm
Y0K75u9TEUPhuGgWU4mQDvieEaSQEnsT6zKPeZY0EUNtrHMCXvYUuSUg0PsMjUSvpysUT6OOSil9
izp/VNk1YJ8vf6MAAABDdEVYdFNvZnR3YXJlAEAoIylJbWFnZU1hZ2ljayA0LjIuOCA5OS8wOC8w
MSBjcmlzdHlAbXlzdGljLmVzLmR1cG9udC5jb22RuiG4AAAAKnRFWHRTaWduYXR1cmUAODBlYWU1
MjljOTRhN2Y0N2RlY2NmYWRhMjhhY2I5ZGblb7ENAAAADnRFWHRQYWdlADEyeDEyKzArMIRtu30A
AAAASUVORK5CYII="></td><td>
域必须标记为 <span class="monospaced">required</span> or <span class="monospaced">optional</span>. Fields may be marked as <span class="monospaced">required</span> or <span class="monospaced">optional</span>
</td></tr>
<tr><td><img alt="3" src="data:image/png;base64, iVBORw0KGgoAAAANSUhEUgAAAAwAAAAMCAAAAABzHgM7AAAAAmJLR0QAAKqNIzIAAAB4SURBVHja
JU6rFcNADBM09BqBhl6ltDCwKxQeDOwKB7tGYGCoYaChK6cmlt7TD1W5uap/sgoVBnEXWBTSoOdx
7gpLDOAVorWC0ABdcBPqwZtx8Muf+DPXJpQ96Nu/LSMYl/n17oCOnplTOrpiwW3sUs4ZJmob5/wA
Ubg1Y/zrjUwAAABDdEVYdFNvZnR3YXJlAEAoIylJbWFnZU1hZ2ljayA0LjIuOCA5OS8wOC8wMSBj
cmlzdHlAbXlzdGljLmVzLmR1cG9udC5jb22RuiG4AAAAKnRFWHRTaWduYXR1cmUAODBiYmRhMjcy
NmRkYWNlOGFiOGEwMWY1OWRlMmViZGII/Q51AAAADnRFWHRQYWdlADEyeDEyKzArMIRtu30AAAAA
SUVORK5CYII="></td><td>
结构体可以包含其他结构体. Structs may contain other structs
</td></tr>
<tr><td><img alt="4" src="data:image/png;base64, iVBORw0KGgoAAAANSUhEUgAAAAwAAAAMCAAAAABzHgM7AAAAAmJLR0QAAKqNIzIAAABzSURBVHja
HY0hEoUwEEMjkZVYZGVlr1CJxCKRXKPyy28reyVsZeXKsCFi573ZzAQk+x5jaQ6gFQAxIA8XceEN
ZEN3DkOCH/TobUoSVuAYwSSLyzbvaHWVFJxUmmp+PF+twrLkuXzLwPmZ8+OjtH8KS6pGvuoGNo5b
6rzDAAAAQ3RFWHRTb2Z0d2FyZQBAKCMpSW1hZ2VNYWdpY2sgNC4yLjggOTkvMDgvMDEgY3Jpc3R5
QG15c3RpYy5lcy5kdXBvbnQuY29tkbohuAAAACp0RVh0U2lnbmF0dXJlADlmODJmY2FjOWUwMzlj
YmRiNzIzODBhNDU5MTMyNGY1gLv4dgAAAA50RVh0UGFnZQAxMngxMiswKzCEbbt9AAAAAElFTkSu
QmCC"></td><td>
默认值是可选的. You may specify an optional "default" value for a field
</td></tr>
<tr><td><img alt="5" src="data:image/png;base64, iVBORw0KGgoAAAANSUhEUgAAAAwAAAAMCAAAAABzHgM7AAAAAmJLR0QAAKqNIzIAAAB2SURBVHja
FY6hEcQwDAQPChqGGhoaqgWX8PUYBhqGBn4rX0JooKDh/UlsZ3b2BJKXH8XPTYLh1lpt1h+BwxkR
A23jhsCQd2IkfH9T3HEkzPFegCXUKSUSpJUPsN7UFOgc9VkZUBoz9l0yrVHZarUcJZeb9XznDyNb
Ny9CX3/7AAAAQ3RFWHRTb2Z0d2FyZQBAKCMpSW1hZ2VNYWdpY2sgNC4yLjggOTkvMDgvMDEgY3Jp
c3R5QG15c3RpYy5lcy5kdXBvbnQuY29tkbohuAAAACp0RVh0U2lnbmF0dXJlAGZlNjkwNDYzMzc5
ZWIyNWU1NjJmY2M4Y2M5YjNjN2Uw37I5ngAAAA50RVh0UGFnZQAxMngxMiswKzCEbbt9AAAAAElF
TkSuQmCC"></td><td>
可以在同一个Thrift文件中定义和引用多个结构体.
    Multiple structs can be defined and referred to within the same Thrift file
</td></tr>
</table></div>
<div class="paragraph"><p>As you can see, each field in the message definition has a unique numbered tag.
These tags are used to identify your fields in the wire format, and should not
be changed once your message type is in use.</p></div>
<div class="paragraph"><p>正如你看到, 消息定义中的每个域都有一个唯一的数字标签.
这些数字标签是用来在消息格式中标识你的域. 这些标签不应该在消息类型投入使用后更改.</p></div>
<div class="paragraph"><p>Fields may be marked <span class="monospaced">required</span> or <span class="monospaced">optional</span> with obvious meanings for
well-formed structs. Thrift will complain if required fields have not been set
in a struct, for instance. If an optional field has not been set in the struct,
it will not be serialized over the wire. If a default value has been specified
for an optional field, the field is assigned the default value when the struct
is parsed and no value has been explicitly assigned for that field.</p></div>
<div class="paragraph"><p>将域可以被标记为 <span class="monospaced">required</span> 或 <span class="monospaced">optional</span> 对于一个良好格式的定义是非常有意义的.
比如, Thrift会报告如果必须的域没有被复制.
如果一个可选的域没有被赋值, 它将不会被序列化.
如果一个可选域有默认值, 在解析结构体时, 如果没有显示对这个可选域赋值, 默认值将被使用.</p></div>
<div class="paragraph"><p>Unlike services, structs do not support inheritance, that is, a struct may not
extend other structs.</p></div>
<div class="paragraph"><p>与服务不同, 结构体不支持继承, 也就是说, 结构体无法拓展其他的结构体.</p></div>
<div class="admonitionblock">
<table><tr>
<td class="icon">
<img alt="Warning" src="data:image/png;base64,
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
/F/lgJiyQFHragAAAABJRU5ErkJggg==">
</td>
<td class="content">
<div class="title">Required Is Forever Required是永久性的</div>
<div class="paragraph"><p>You should be very careful about marking fields as required. If at some point
you wish to stop writing or sending a required field, it will be problematic to
change the field to an optional field&#8201;&#8212;&#8201;old readers will consider messages
without this field to be incomplete and may reject or drop them unintentionally.
You should consider writing application-specific custom validation routines for
your buffers instead. Some have come the conclusion that using required does
more harm than good; they prefer to use only optional. However, this view is not
universal.</p></div>
<div class="paragraph"><p>在将某个域标记为required时需要十分小心. 如果你不想在消息中发送那个required域, 将那个
域变成optional可能会产生问题&#8201;&#8212;&#8201;老版本消息读取器会将缺少required域的消息认为不完整并拒绝
或者丢弃. 在这种情况下, 你应该考虑编写基于特定应用的自定义消息验证过程.</p></div>
<div class="paragraph"><p>因此, 有人觉得使用required域是弊大于利. 他们偏向于仅适用optional的域.
但是这种观点并不普遍.</p></div>
</td>
</tr></table>
</div>
</div>
<div class="sect2">
<h3 id="_defining_services_定义服务">Defining Services 定义服务</h3>
<div class="paragraph"><p>While there are several popular serialization/deserialization frameworks (like
Protocol Buffers), there are few frameworks that provide out-of-the-box support
for RPC-based services across multiple languages. This is one of the major
attractions of Thrift.</p></div>
<div class="paragraph"><p>尽管当下有很多流行的序列化/反序列化框架(比如Protocol Buffers), 但是却鲜有框架支持
跨语言的基于PRC的服务. 这也是Thrift的主要目标之一.</p></div>
<div class="paragraph"><p>Think of service definitions as Java interfaces&#8201;&#8212;&#8201;you need to supply a name and
signatures for the methods. Optionally, a service may extend other services.</p></div>
<div class="paragraph"><p>如果我们将服务看做Java接口&#8201;&#8212;&#8201;我们需要提供方法的名字和签名. 此外, 服务可以扩展于其他服务.</p></div>
<div class="paragraph"><p>The Thrift compiler will generate service interface code (for the server) and
stubs (for the client) in your chosen language. Thrift ships with RPC libraries
for most languages that you can then use to run your client and server.</p></div>
<div class="paragraph"><p>Thrift编译器会你所选的语言生成服务器接口代码(服务器端)和桩代码(客户端).
Thrift包含了所种语言客户端和服务器端运行所需的RPC库.</p></div>
<div class="listingblock">
<div class="content"><div class="highlight"><pre><span></span><span class="n">service</span> <span class="n">Twitter</span> <span class="o">{</span>
    <span class="c1">// A method definition looks like C code. It has a return type, arguments,</span>
    <span class="c1">// and optionally a list of exceptions that it may throw. Note that argument</span>
    <span class="c1">// lists and exception list are specified using the exact same syntax as</span>
    <span class="c1">// field lists in structs.</span>
    <span class="kt">void</span> <span class="nf">ping</span><span class="o">(),</span>                                                             <span class="c1">// <img alt="1" src="data:image/png;base64,
iVBORw0KGgoAAAANSUhEUgAAAAwAAAAMCAAAAABzHgM7AAAAAmJLR0QAAKqNIzIAAABjSURBVHja
VY6xDcAwCAS/pPQaLim9QmajdOk2I2SNrMEIlARIoigU8Cek/4e7zdHaWOYOVwaoA6wOCw05Y7FB
gE0tIWQ+sBcwKM8qoD/wB5wGL8hjfdzWrh01GRp1hInGjDoXwHgsFuzBVLQAAABDdEVYdFNvZnR3
YXJlAEAoIylJbWFnZU1hZ2ljayA0LjIuOCA5OS8wOC8wMSBjcmlzdHlAbXlzdGljLmVzLmR1cG9u
dC5jb22RuiG4AAAAKnRFWHRTaWduYXR1cmUANThhMDcyZTA3MGRhMjJmNjEzNWNiZDNlNDE0NTQ2
ZjloaiHtAAAADnRFWHRQYWdlADEyeDEyKzArMIRtu30AAAAASUVORK5CYII="></span>
    <span class="n">bool</span> <span class="nf">postTweet</span><span class="o">(</span><span class="mi">1</span><span class="o">:</span><span class="n">Tweet</span> <span class="n">tweet</span><span class="o">)</span> <span class="kd">throws</span> <span class="o">(</span><span class="mi">1</span><span class="o">:</span><span class="n">TwitterUnavailable</span> <span class="n">unavailable</span><span class="o">),</span> <span class="c1">// <img alt="2" src="data:image/png;base64,
iVBORw0KGgoAAAANSUhEUgAAAAwAAAAMCAAAAABzHgM7AAAAAmJLR0QAAKqNIzIAAAB7SURBVHja
HY6hFcMwDEQ/NDQsNSwU9Apdo7Cw0CsIBoZmhKzQEQJLDQsFVclHpHu693W429Zr7bu541Pg3kCm
Y0K75u9TEUPhuGgWU4mQDvieEaSQEnsT6zKPeZY0EUNtrHMCXvYUuSUg0PsMjUSvpysUT6OOSil9
izp/VNk1YJ8vf6MAAABDdEVYdFNvZnR3YXJlAEAoIylJbWFnZU1hZ2ljayA0LjIuOCA5OS8wOC8w
MSBjcmlzdHlAbXlzdGljLmVzLmR1cG9udC5jb22RuiG4AAAAKnRFWHRTaWduYXR1cmUAODBlYWU1
MjljOTRhN2Y0N2RlY2NmYWRhMjhhY2I5ZGblb7ENAAAADnRFWHRQYWdlADEyeDEyKzArMIRtu30A
AAAASUVORK5CYII="></span>
    <span class="n">TweetSearchResult</span> <span class="nf">searchTweets</span><span class="o">(</span><span class="mi">1</span><span class="o">:</span><span class="n">string</span> <span class="n">query</span><span class="o">);</span>                          <span class="c1">// <img alt="3" src="data:image/png;base64,
iVBORw0KGgoAAAANSUhEUgAAAAwAAAAMCAAAAABzHgM7AAAAAmJLR0QAAKqNIzIAAAB4SURBVHja
JU6rFcNADBM09BqBhl6ltDCwKxQeDOwKB7tGYGCoYaChK6cmlt7TD1W5uap/sgoVBnEXWBTSoOdx
7gpLDOAVorWC0ABdcBPqwZtx8Muf+DPXJpQ96Nu/LSMYl/n17oCOnplTOrpiwW3sUs4ZJmob5/wA
Ubg1Y/zrjUwAAABDdEVYdFNvZnR3YXJlAEAoIylJbWFnZU1hZ2ljayA0LjIuOCA5OS8wOC8wMSBj
cmlzdHlAbXlzdGljLmVzLmR1cG9udC5jb22RuiG4AAAAKnRFWHRTaWduYXR1cmUAODBiYmRhMjcy
NmRkYWNlOGFiOGEwMWY1OWRlMmViZGII/Q51AAAADnRFWHRQYWdlADEyeDEyKzArMIRtu30AAAAA
SUVORK5CYII="></span>

    <span class="c1">// The &#39;oneway&#39; modifier indicates that the client only makes a request and</span>
    <span class="c1">// does not wait for any response at all. Oneway methods MUST be void.</span>
    <span class="n">oneway</span> <span class="kt">void</span> <span class="nf">zip</span><span class="o">()</span>                                                        <span class="c1">// <img alt="4" src="data:image/png;base64,
iVBORw0KGgoAAAANSUhEUgAAAAwAAAAMCAAAAABzHgM7AAAAAmJLR0QAAKqNIzIAAABzSURBVHja
HY0hEoUwEEMjkZVYZGVlr1CJxCKRXKPyy28reyVsZeXKsCFi573ZzAQk+x5jaQ6gFQAxIA8XceEN
ZEN3DkOCH/TobUoSVuAYwSSLyzbvaHWVFJxUmmp+PF+twrLkuXzLwPmZ8+OjtH8KS6pGvuoGNo5b
6rzDAAAAQ3RFWHRTb2Z0d2FyZQBAKCMpSW1hZ2VNYWdpY2sgNC4yLjggOTkvMDgvMDEgY3Jpc3R5
QG15c3RpYy5lcy5kdXBvbnQuY29tkbohuAAAACp0RVh0U2lnbmF0dXJlADlmODJmY2FjOWUwMzlj
YmRiNzIzODBhNDU5MTMyNGY1gLv4dgAAAA50RVh0UGFnZQAxMngxMiswKzCEbbt9AAAAAElFTkSu
QmCC"></span>
<span class="o">}</span>
</pre></div></div></div>
<div class="colist arabic"><table>
<tr><td><img alt="1" src="data:image/png;base64, iVBORw0KGgoAAAANSUhEUgAAAAwAAAAMCAAAAABzHgM7AAAAAmJLR0QAAKqNIzIAAABjSURBVHja
VY6xDcAwCAS/pPQaLim9QmajdOk2I2SNrMEIlARIoigU8Cek/4e7zdHaWOYOVwaoA6wOCw05Y7FB
gE0tIWQ+sBcwKM8qoD/wB5wGL8hjfdzWrh01GRp1hInGjDoXwHgsFuzBVLQAAABDdEVYdFNvZnR3
YXJlAEAoIylJbWFnZU1hZ2ljayA0LjIuOCA5OS8wOC8wMSBjcmlzdHlAbXlzdGljLmVzLmR1cG9u
dC5jb22RuiG4AAAAKnRFWHRTaWduYXR1cmUANThhMDcyZTA3MGRhMjJmNjEzNWNiZDNlNDE0NTQ2
ZjloaiHtAAAADnRFWHRQYWdlADEyeDEyKzArMIRtu30AAAAASUVORK5CYII="></td><td>
Confusingly, method definitions can be terminated using comma or semi-colon
</td></tr>
<tr><td><img alt="2" src="data:image/png;base64, iVBORw0KGgoAAAANSUhEUgAAAAwAAAAMCAAAAABzHgM7AAAAAmJLR0QAAKqNIzIAAAB7SURBVHja
HY6hFcMwDEQ/NDQsNSwU9Apdo7Cw0CsIBoZmhKzQEQJLDQsFVclHpHu693W429Zr7bu541Pg3kCm
Y0K75u9TEUPhuGgWU4mQDvieEaSQEnsT6zKPeZY0EUNtrHMCXvYUuSUg0PsMjUSvpysUT6OOSil9
izp/VNk1YJ8vf6MAAABDdEVYdFNvZnR3YXJlAEAoIylJbWFnZU1hZ2ljayA0LjIuOCA5OS8wOC8w
MSBjcmlzdHlAbXlzdGljLmVzLmR1cG9udC5jb22RuiG4AAAAKnRFWHRTaWduYXR1cmUAODBlYWU1
MjljOTRhN2Y0N2RlY2NmYWRhMjhhY2I5ZGblb7ENAAAADnRFWHRQYWdlADEyeDEyKzArMIRtu30A
AAAASUVORK5CYII="></td><td>
参数可以使原始类型或结构体. Arguments can be primitive types or structs
</td></tr>
<tr><td><img alt="3" src="data:image/png;base64, iVBORw0KGgoAAAANSUhEUgAAAAwAAAAMCAAAAABzHgM7AAAAAmJLR0QAAKqNIzIAAAB4SURBVHja
JU6rFcNADBM09BqBhl6ltDCwKxQeDOwKB7tGYGCoYaChK6cmlt7TD1W5uap/sgoVBnEXWBTSoOdx
7gpLDOAVorWC0ABdcBPqwZtx8Muf+DPXJpQ96Nu/LSMYl/n17oCOnplTOrpiwW3sUs4ZJmob5/wA
Ubg1Y/zrjUwAAABDdEVYdFNvZnR3YXJlAEAoIylJbWFnZU1hZ2ljayA0LjIuOCA5OS8wOC8wMSBj
cmlzdHlAbXlzdGljLmVzLmR1cG9udC5jb22RuiG4AAAAKnRFWHRTaWduYXR1cmUAODBiYmRhMjcy
NmRkYWNlOGFiOGEwMWY1OWRlMmViZGII/Q51AAAADnRFWHRQYWdlADEyeDEyKzArMIRtu30AAAAA
SUVORK5CYII="></td><td>
返回值也一样. Likewise for return types
</td></tr>
<tr><td><img alt="4" src="data:image/png;base64, iVBORw0KGgoAAAANSUhEUgAAAAwAAAAMCAAAAABzHgM7AAAAAmJLR0QAAKqNIzIAAABzSURBVHja
HY0hEoUwEEMjkZVYZGVlr1CJxCKRXKPyy28reyVsZeXKsCFi573ZzAQk+x5jaQ6gFQAxIA8XceEN
ZEN3DkOCH/TobUoSVuAYwSSLyzbvaHWVFJxUmmp+PF+twrLkuXzLwPmZ8+OjtH8KS6pGvuoGNo5b
6rzDAAAAQ3RFWHRTb2Z0d2FyZQBAKCMpSW1hZ2VNYWdpY2sgNC4yLjggOTkvMDgvMDEgY3Jpc3R5
QG15c3RpYy5lcy5kdXBvbnQuY29tkbohuAAAACp0RVh0U2lnbmF0dXJlADlmODJmY2FjOWUwMzlj
YmRiNzIzODBhNDU5MTMyNGY1gLv4dgAAAA50RVh0UGFnZQAxMngxMiswKzCEbbt9AAAAAElFTkSu
QmCC"></td><td>
<span class="monospaced">void</span> 是有效的函数返回值. <span class="monospaced">void</span> is a valid return type for functions
</td></tr>
</table></div>
<div class="paragraph"><p>Note that the argument lists (and exception lists) for functions are specified
exactly like structs.</p></div>
<div class="paragraph"><p>注意, 函数的参数列表(和异常列表)和结构体非常类似.</p></div>
<div class="paragraph"><p>Services support inheritance: a service may optionally inherit from another
service using the <span class="monospaced">extends</span> keyword.</p></div>
<div class="paragraph"><p>服务支持继承: 一个服务可以可以使用关键词 <span class="monospaced">extends</span> 来扩展其他服务.</p></div>
<div class="admonitionblock">
<table><tr>
<td class="icon">
<img alt="Important" src="data:image/png;base64,
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
EQn3XQAAAABJRU5ErkJggg==">
</td>
<td class="content">
<div class="title">Nested Types 嵌套类型</div>
<div class="paragraph"><p>As of this writing, Thrift does NOT support nested type <em>definitions</em>. That is,
you may not define a struct (or an enum) within a struct; you may of course
<em>use</em> structs/enums within other structs.</p></div>
<div class="paragraph"><p>在写这篇文章时, Thrift不支持嵌套类型 <em>定义</em>. 也就是说你不可以在一个结构体重定义另外一个
结构体(或枚举). 当然在结构体重 <em>使用</em> 其他的结构体/枚举是允许的.</p></div>
</td>
</tr></table>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_generated_code_生成的代码">Generated Code 生成的代码</h2>
<div class="sectionbody">
<div class="paragraph"><p>This section contains documentation for working with Thrift generated code in
various target languages. We begin by introducing the common concepts that are
used across the board&#8201;&#8212;&#8201;these govern how the generated code is structured and
will hopefully help you understand how to use it effectively.</p></div>
<div class="paragraph"><p>这一章讲解了如何使用由Thrift生成的代码.
首先我们会介绍一些在Thrift广泛使用的概念&#8201;&#8212;&#8201;这些概念控制着生成代码的结构和方式.
理解这些概念能够帮助你理解如果跟高效的使用Thrift.</p></div>
<div class="sect2">
<h3 id="_concepts_概念">Concepts 概念</h3>
<div class="paragraph"><p>Here is a pictorial view of the Thrift network stack:</p></div>
<div class="paragraph"><p>Thrift的网络栈的图示:</p></div>
<div class="listingblock">
<div class="title">The Thrift Network Stack Thrift网络栈</div>
<div class="content monospaced">
<pre>+-------------------------------------------+
| cGRE                                      |
| Server                                    |
| (single-threaded, event-driven etc)       |
+-------------------------------------------+
| cBLU                                      |
| Processor                                 |
| (compiler generated)                      |
+-------------------------------------------+
| cGRE                                      |
| Protocol                                  |
| (JSON, compact etc)                       |
+-------------------------------------------+
| cGRE                                      |
| Transport                                 |
| (raw TCP, HTTP etc)                       |
+-------------------------------------------+</pre>
</div></div>
<div class="sect3">
<h4 id="_transport_传输">Transport 传输</h4>
<div class="paragraph"><p>传输层提供了一个对网络读写简单的抽象.
这使得Thrift可以将底层的传输形式和系统的其他部分(例如序列化反序列化)进行解耦.</p></div>
<div class="paragraph"><p>The Transport layer provides a simple abstraction for reading/writing from/to
the network. This enables Thrift to decouple the underlying transport from the
rest of the system (serialization/deserialization, for instance).</p></div>
<div class="paragraph"><p>Here are some of the methods exposed by the <span class="monospaced">Transport</span> interface:</p></div>
<div class="paragraph"><p><span class="monospaced">Transport</span> 接口的主要方法:</p></div>
<div class="ulist"><ul>
<li>
<p>
<span class="monospaced">open</span>
</p>
</li>
<li>
<p>
<span class="monospaced">close</span>
</p>
</li>
<li>
<p>
<span class="monospaced">read</span>
</p>
</li>
<li>
<p>
<span class="monospaced">write</span>
</p>
</li>
<li>
<p>
<span class="monospaced">flush</span>
</p>
</li>
</ul></div>
<div class="paragraph"><p>除了以上的 <span class="monospaced">Transport</span> 接口, Thrift也提供了 <span class="monospaced">ServerTransport</span> 接口来接受或创建
原始的传输对象. 顾名思义, <span class="monospaced">ServerTransport</span> 主要用于服务器端的传入连接创建新的传输对象.</p></div>
<div class="paragraph"><p>In addition to the <span class="monospaced">Transport</span> interface above, Thrift also uses a
<span class="monospaced">ServerTransport</span> interface used to accept or create primitive transport
objects. As the name suggest, <span class="monospaced">ServerTransport</span> is used mainly on the server
side to create new Transport objects for incoming connections.</p></div>
<div class="ulist"><ul>
<li>
<p>
<span class="monospaced">open</span>
</p>
</li>
<li>
<p>
<span class="monospaced">listen</span>
</p>
</li>
<li>
<p>
<span class="monospaced">accept</span>
</p>
</li>
<li>
<p>
<span class="monospaced">close</span>
</p>
</li>
</ul></div>
<div class="paragraph"><p>对于大多数Thrift所支持的语言都可以使用以下两种传输方式.</p></div>
<div class="paragraph"><p>Here are some of the transports available for majority of the Thrift-supported
languages:</p></div>
<div class="ulist"><ul>
<li>
<p>
file: read/write to/from a file on disk
</p>
</li>
<li>
<p>
http: as the name suggests
</p>
</li>
</ul></div>
</div>
<div class="sect3">
<h4 id="_protocol_协议">Protocol 协议</h4>
<div class="paragraph"><p>协议层抽象定义了如何将内存中的数据结构映射到某个消息约定格式(wire-format).
换句话说, 协议定义了如何将底层的传输数据解码/编码成相应的数据类型.
因此, 协议的实现控制了编码方案, 并且对序列化和反序列化负责.
从这个角度讲, 协议的例子包括JSON, XML, 纯文本, 压缩二进制等.</p></div>
<div class="paragraph"><p>The Protocol abstraction defines a mechanism to map in-memory data structures to
a wire-format. In other words, a protocol specifies how datatypes use the
underlying Transport to encode/decode themselves.  Thus the protocol
implementation governs the encoding scheme and is responsible for
(de)serialization. Some examples of protocols in this sense include JSON, XML,
plain text, compact binary etc.</p></div>
<div class="paragraph"><p><span class="monospaced">Protocol</span> 接口</p></div>
<div class="paragraph"><p>Here is the <span class="monospaced">Protocol</span> interface:</p></div>
<div class="listingblock">
<div class="content"><div class="highlight"><pre><span></span><span class="n">writeMessageBegin</span><span class="p">(</span><span class="n">name</span><span class="p">,</span> <span class="n">type</span><span class="p">,</span> <span class="n">seq</span><span class="p">)</span>
<span class="n">writeMessageEnd</span><span class="p">()</span>
<span class="n">writeStructBegin</span><span class="p">(</span><span class="n">name</span><span class="p">)</span>
<span class="n">writeStructEnd</span><span class="p">()</span>
<span class="n">writeFieldBegin</span><span class="p">(</span><span class="n">name</span><span class="p">,</span> <span class="n">type</span><span class="p">,</span> <span class="n">id</span><span class="p">)</span>
<span class="n">writeFieldEnd</span><span class="p">()</span>
<span class="n">writeFieldStop</span><span class="p">()</span>
<span class="n">writeMapBegin</span><span class="p">(</span><span class="n">ktype</span><span class="p">,</span> <span class="n">vtype</span><span class="p">,</span> <span class="n">size</span><span class="p">)</span>
<span class="n">writeMapEnd</span><span class="p">()</span>
<span class="n">writeListBegin</span><span class="p">(</span><span class="n">etype</span><span class="p">,</span> <span class="n">size</span><span class="p">)</span>
<span class="n">writeListEnd</span><span class="p">()</span>
<span class="n">writeSetBegin</span><span class="p">(</span><span class="n">etype</span><span class="p">,</span> <span class="n">size</span><span class="p">)</span>
<span class="n">writeSetEnd</span><span class="p">()</span>
<span class="n">writeBool</span><span class="p">(</span><span class="kt">bool</span><span class="p">)</span>
<span class="n">writeByte</span><span class="p">(</span><span class="n">byte</span><span class="p">)</span>
<span class="n">writeI16</span><span class="p">(</span><span class="n">i16</span><span class="p">)</span>
<span class="n">writeI32</span><span class="p">(</span><span class="n">i32</span><span class="p">)</span>
<span class="n">writeI64</span><span class="p">(</span><span class="n">i64</span><span class="p">)</span>
<span class="n">writeDouble</span><span class="p">(</span><span class="kt">double</span><span class="p">)</span>
<span class="n">writeString</span><span class="p">(</span><span class="n">string</span><span class="p">)</span>

<span class="n">name</span><span class="p">,</span> <span class="n">type</span><span class="p">,</span> <span class="n">seq</span> <span class="o">=</span> <span class="n">readMessageBegin</span><span class="p">()</span>
                  <span class="n">readMessageEnd</span><span class="p">()</span>
<span class="n">name</span> <span class="o">=</span> <span class="n">readStructBegin</span><span class="p">()</span>
       <span class="n">readStructEnd</span><span class="p">()</span>
<span class="n">name</span><span class="p">,</span> <span class="n">type</span><span class="p">,</span> <span class="n">id</span> <span class="o">=</span> <span class="n">readFieldBegin</span><span class="p">()</span>
                 <span class="n">readFieldEnd</span><span class="p">()</span>
<span class="n">k</span><span class="p">,</span> <span class="n">v</span><span class="p">,</span> <span class="n">size</span> <span class="o">=</span> <span class="n">readMapBegin</span><span class="p">()</span>
             <span class="n">readMapEnd</span><span class="p">()</span>
<span class="n">etype</span><span class="p">,</span> <span class="n">size</span> <span class="o">=</span> <span class="n">readListBegin</span><span class="p">()</span>
              <span class="n">readListEnd</span><span class="p">()</span>
<span class="n">etype</span><span class="p">,</span> <span class="n">size</span> <span class="o">=</span> <span class="n">readSetBegin</span><span class="p">()</span>
              <span class="n">readSetEnd</span><span class="p">()</span>
<span class="kt">bool</span> <span class="o">=</span> <span class="n">readBool</span><span class="p">()</span>
<span class="n">byte</span> <span class="o">=</span> <span class="n">readByte</span><span class="p">()</span>
<span class="n">i16</span> <span class="o">=</span> <span class="n">readI16</span><span class="p">()</span>
<span class="n">i32</span> <span class="o">=</span> <span class="n">readI32</span><span class="p">()</span>
<span class="n">i64</span> <span class="o">=</span> <span class="n">readI64</span><span class="p">()</span>
<span class="kt">double</span> <span class="o">=</span> <span class="n">readDouble</span><span class="p">()</span>
<span class="n">string</span> <span class="o">=</span> <span class="n">readString</span><span class="p">()</span>
</pre></div></div></div>
<div class="paragraph"><p>Thrift协议被设计成面向流的(stream oriented), 因此不需要显示对其进行帧处理.
比如说, 在序列化之前, 无需知道字符串的长度或者列表中元素的数量.</p></div>
<div class="paragraph"><p>Thrift Protocols are stream oriented by design. There is no need for any
explicit framing. For instance, it is not necessary to know the length of a
string or the number of items in a list before we start serializing them.</p></div>
<div class="paragraph"><p>对于大多数Thrift所支持的语言都可以使用下列的传输协议.</p></div>
<div class="paragraph"><p>Here are some of the protocols available for majority of the Thrift-supported
languages:</p></div>
<div class="ulist"><ul>
<li>
<p>
binary: Fairly simple binary encoding&#8201;&#8212;&#8201;the length and type of a field are
  encoded as bytes followed by the actual value of the field.
</p>
</li>
<li>
<p>
compact: Described in
  <a href="https://issues.apache.org/jira/browse/THRIFT-110">THRIFT-110</a>
</p>
</li>
<li>
<p>
json:
</p>
</li>
</ul></div>
</div>
<div class="sect3">
<h4 id="_processor_处理器">Processor 处理器</h4>
<div class="paragraph"><p>处理器对从输入流读取数据和向输出流写出数据的功能进行封装.
输出和输出流都是由协议对象代表.</p></div>
<div class="paragraph"><p>A Processor encapsulates the ability to read data from input streams and write
to output streams. The input and output streams are represented by Protocol
objects. The Processor interface is extremely simple:</p></div>
<div class="paragraph"><p>处理器接口很简单:</p></div>
<div class="listingblock">
<div class="content"><div class="highlight"><pre><span></span><span class="kd">interface</span> <span class="nc">TProcessor</span> <span class="o">{</span>
    <span class="n">bool</span> <span class="nf">process</span><span class="o">(</span><span class="n">TProtocol</span> <span class="n">in</span><span class="o">,</span> <span class="n">TProtocol</span> <span class="n">out</span><span class="o">)</span> <span class="kd">throws</span> <span class="n">TException</span>
<span class="o">}</span>
</pre></div></div></div>
<div class="paragraph"><p>编译器会生成特定于服务的处理器的实现.
协议实际上所做的工作就是将数据从消息(wire)中读出(根据输入协议), 在将处理委托给处理程序(handler),
最后将响应写入返回的消息中(使用输出协议).</p></div>
<div class="paragraph"><p>Service-specific processor implementations are generated by the compiler. The
Processor essentially reads data from the wire (using the input protocol),
delegates processing to the handler (implemented by the user) and writes the
response over the wire (using the output protocol).</p></div>
</div>
<div class="sect3">
<h4 id="_server_服务器">Server 服务器</h4>
<div class="paragraph"><p>服务器将所有的特性进行组合
A Server pulls together all of the various features described above:</p></div>
<div class="ulist"><ul>
<li>
<p>
创建一个传输 Create a transport
</p>
</li>
<li>
<p>
为传输创建输入输出协议 Create input/output protocols for the transport
</p>
</li>
<li>
<p>
基于输入输出协议创建处理器 Create a processor based on the input/output protocols
</p>
</li>
<li>
<p>
等待传入连接并将其交给处理器 Wait for incoming connections and hand them off to the processor
</p>
</li>
</ul></div>
<div class="paragraph"><p>接下来, 我们讨论下为特定语言生成的代码.
除非特别说明, 后面的部分都会使用以下Thrift定义.
Next we discuss the generated code for specific languages. Unless mentioned
otherwise, the sections below will assume the following Thrift specification:</p></div>
<div class="listingblock">
<div class="title">范例IDL</div>
<div class="content"><div class="highlight"><pre><span></span><span class="k">namespace</span> <span class="n">cpp</span> <span class="n">thrift</span><span class="p">.</span><span class="n">example</span>
<span class="k">namespace</span> <span class="n">java</span> <span class="n">thrift</span><span class="p">.</span><span class="n">example</span>

<span class="k">enum</span> <span class="n">TweetType</span> <span class="p">{</span>
    <span class="n">TWEET</span><span class="p">,</span>
    <span class="n">RETWEET</span> <span class="o">=</span> <span class="mi">2</span><span class="p">,</span>
    <span class="n">DM</span> <span class="o">=</span> <span class="mh">0xa</span><span class="p">,</span>
    <span class="n">REPLY</span>
<span class="p">}</span>

<span class="k">struct</span> <span class="n">Location</span> <span class="p">{</span>
    <span class="mi">1</span><span class="o">:</span> <span class="n">required</span> <span class="kt">double</span> <span class="n">latitude</span><span class="p">;</span>
    <span class="mi">2</span><span class="o">:</span> <span class="n">required</span> <span class="kt">double</span> <span class="n">longitude</span><span class="p">;</span>
<span class="p">}</span>

<span class="k">struct</span> <span class="n">Tweet</span> <span class="p">{</span>
    <span class="mi">1</span><span class="o">:</span> <span class="n">required</span> <span class="n">i32</span> <span class="n">userId</span><span class="p">;</span>
    <span class="mi">2</span><span class="o">:</span> <span class="n">required</span> <span class="n">string</span> <span class="n">userName</span><span class="p">;</span>
    <span class="mi">3</span><span class="o">:</span> <span class="n">required</span> <span class="n">string</span> <span class="n">text</span><span class="p">;</span>
    <span class="mi">4</span><span class="o">:</span> <span class="n">optional</span> <span class="n">Location</span> <span class="n">loc</span><span class="p">;</span>
    <span class="mi">5</span><span class="o">:</span> <span class="n">optional</span> <span class="n">TweetType</span> <span class="n">tweetType</span> <span class="o">=</span> <span class="n">TweetType</span><span class="p">.</span><span class="n">TWEET</span><span class="p">;</span>
    <span class="mi">16</span><span class="o">:</span> <span class="n">optional</span> <span class="n">string</span> <span class="n">language</span> <span class="o">=</span> <span class="s">&quot;english&quot;</span><span class="p">;</span>
<span class="p">}</span>

<span class="k">typedef</span> <span class="n">list</span><span class="o">&lt;</span><span class="n">Tweet</span><span class="o">&gt;</span> <span class="n">TweetList</span>

<span class="k">struct</span> <span class="n">TweetSearchResult</span> <span class="p">{</span>
    <span class="mi">1</span><span class="o">:</span> <span class="n">TweetList</span> <span class="n">tweets</span><span class="p">;</span>
<span class="p">}</span>

<span class="n">exception</span> <span class="n">TwitterUnavailable</span> <span class="p">{</span>
    <span class="mi">1</span><span class="o">:</span> <span class="n">string</span> <span class="n">message</span><span class="p">;</span>
<span class="p">}</span>

<span class="k">const</span> <span class="n">i32</span> <span class="n">MAX_RESULTS</span> <span class="o">=</span> <span class="mi">100</span><span class="p">;</span>

<span class="n">service</span> <span class="n">Twitter</span> <span class="p">{</span>
    <span class="kt">void</span> <span class="n">ping</span><span class="p">(),</span>
    <span class="kt">bool</span> <span class="n">postTweet</span><span class="p">(</span><span class="mi">1</span><span class="o">:</span><span class="n">Tweet</span> <span class="n">tweet</span><span class="p">)</span> <span class="k">throws</span> <span class="p">(</span><span class="mi">1</span><span class="o">:</span><span class="n">TwitterUnavailable</span> <span class="n">unavailable</span><span class="p">),</span>
    <span class="n">TweetSearchResult</span> <span class="n">searchTweets</span><span class="p">(</span><span class="mi">1</span><span class="o">:</span><span class="n">string</span> <span class="n">query</span><span class="p">);</span>
    <span class="n">oneway</span> <span class="kt">void</span> <span class="n">zip</span><span class="p">()</span>
<span class="p">}</span>
</pre></div></div></div>
<div class="sidebarblock">
<div class="content">
<div class="title">How are nested structs initialized? 嵌套结构如何初始化?</div>
<div class="paragraph"><p>In an earlier section, we saw how Thrift allows structs to contain other structs
(no nested definitions yet though!) In most object-oriented and/or dynamic
languages, structs map to objects and so it is instructive to understand how
Thrift initializes nested structs. One reasonable approach would be to treat the
nested structs as pointers or references and initialize them with NULL, until
explicitly set by the user.
Unfortunately, for many languages, Thrift uses a <em>pass by value</em> model. As a
concrete example, consider the generated C++ code for the <span class="monospaced">Tweet</span> struct in our
example above:</p></div>
<div class="paragraph"><p>在之前的部分, 我们看到了Thrift是如何使用结构来包含其他的结构(尽管没有嵌套的定义！)
在大多数面向对象或者动态语言中, 结构对应于其中的对象. 因此了解Thrift如何初始化嵌套结构
是有益的.
一个合理的方法是将嵌套的结构作为指针或者引用, 并且将他们初始化为NULL直到被显示赋值.
不幸的是, 对很多语言而言, Thrift使用值传递模型.
作为一个具体的例子，考虑有上面例子中为+Tweet+结构生成的生成的C++代码:</p></div>
<div class="listingblock">
<div class="content"><div class="highlight"><pre><span></span>  <span class="p">...</span>
  <span class="kt">int32_t</span> <span class="n">userId</span><span class="p">;</span>
  <span class="n">std</span><span class="o">::</span><span class="n">string</span> <span class="n">userName</span><span class="p">;</span>
  <span class="n">std</span><span class="o">::</span><span class="n">string</span> <span class="n">text</span><span class="p">;</span>
  <span class="n">Location</span> <span class="n">loc</span><span class="p">;</span>
  <span class="n">TweetType</span><span class="o">::</span><span class="n">type</span> <span class="n">tweetType</span><span class="p">;</span>
  <span class="n">std</span><span class="o">::</span><span class="n">string</span> <span class="n">language</span><span class="p">;</span>
  <span class="p">...</span>
</pre></div></div></div>
<div class="paragraph"><p>As you can see, the nested <span class="monospaced">Location</span> structure is <strong>fully allocated inline</strong>.
Because <span class="monospaced">Location</span> is optional, the code uses the internal <em>__isset</em> flags to
determine if the field has actually been "set" by the user.</p></div>
<div class="paragraph"><p>如你所见, 嵌套的 <span class="monospaced">Location</span> 结构是 <strong>完全内联分配</strong> .
因为 <span class="monospaced">Location</span> 是可选的, 代码使用内部标记'__isset'来决定这个域是否被复制.</p></div>
<div class="paragraph"><p>This can lead to some surprising and unintuitive behavior:</p></div>
<div class="paragraph"><p>这个可能导致某些意外的非直观行为:</p></div>
<div class="ulist"><ul>
<li>
<p>
Since the full size of every sub-structure may be allocated at initialization
  in some languages, memory usage may be higher than you expect, especially for
  complicated structures with many unset fields.
</p>
</li>
<li>
<p>
因为对于某些语言来说, 需要在初始化时为其中的子结构分配空间, 因此内存使用会比期望的要高.
  对于那些有诸多未设置域的复杂结构体情况尤为突出.
</p>
</li>
<li>
<p>
The parameters and return types for service methods may not be "optional" and
  you can&#8217;t assign or return <span class="monospaced">null</span> in any dynamic language. Thus to return a
  "no value" result from a method, you must declare an envelope structure with
  an optional field containing the value and then return the envelope with that
  field unset.
</p>
</li>
<li>
<p>
服务的参数和返回值类型可能不是可选的. 并且你无法在动态语言中将其赋值为或返回null. 因此,
  为了返回一个"无值"的结果, 你必须要申明一个包装结构. 这个包装结构包含了一个可选的域.
  在返回"无值"结果时, 实际上返回的是一个域值为空的包装结构.
</p>
</li>
<li>
<p>
The transport layer can, however, marshal method calls from older versions of
  a service definition with missing parameters. Thus, if the original service
  contained a method <span class="monospaced">postTweet(1: Tweet tweet)</span> and a later version changes it
  to <span class="monospaced">postTweet(1: Tweet tweet, 2: string group)</span>, then an older client invoking
  the previous method will result in a newer server receiving the call with the
  new parameter unset. If the new server is in Java, for instance, you may
  in fact receive a <span class="monospaced">null</span> value for the new parameter. And yet you may not
  declare a parameter to be nullable within the IDL.
</p>
</li>
<li>
<p>
传输层可以处理旧版本的调用(丢失参数). 因此, 如果原始版本包含方法
  <span class="monospaced">postTweet(1: Tweet tweet)</span>, 而新版本中将其改为
  <span class="monospaced">postTweet(1: Tweet tweet, 2: string group)</span>. 那么基于新版本会接受原始版本的
  客户端发来的请求, 并将新参数定为未设置. 如果新版本服务器是Java实现的, 那么那个缺失的
  新参数的值就会是null. 然而你可能并没有在IDl中将那个参数设置为可为空的.
</p>
</li>
</ul></div>
</div></div>
</div>
</div>
<div class="sect2">
<h3 id="_java">Java</h3>
<div class="sect3">
<h4 id="_generated_files">Generated Files</h4>
<div class="ulist"><ul>
<li>
<p>
所有的常数声明包含在一个单独文件 a single file (<span class="monospaced">Constants.java</span>) containing all constant definitions
</p>
</li>
<li>
<p>
结构体,枚举和服务各自单独对应一个文件 one file per struct, enum and service
</p>
</li>
</ul></div>
<div class="listingblock">
<div class="content monospaced">
<pre>$ tree gen-java
`-- thrift
    `-- example
        |-- Constants.java
        |-- Location.java
        |-- Tweet.java
        |-- TweetSearchResult.java
        |-- TweetType.java
        `-- Twitter.java</pre>
</div></div>
<div class="admonitionblock">
<table><tr>
<td class="icon">
<img alt="Tip" src="data:image/png;base64,
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">
</td>
<td class="content">
<div class="title">Naming Conventions 命名规则</div>
<div class="paragraph"><p>While the Thrift compiler does not enforce any naming conventions, it is
advisable to stick to standard naming conventions otherwise you may be in for
some surprises. For instance, if you have a struct named <span class="monospaced">tweetSearchResults</span>
(note the mixedCase), the Thrift compiler will generated a Java file named
<span class="monospaced">TweetSearchResults</span> (note the CamelCase) containing a class named
<span class="monospaced">tweetSearchResults</span> (like the original struct). This will obviously not
compile under Java.</p></div>
<div class="paragraph"><p>尽管Thrift编译器不会要求任何命名规则, 但是还是建议遵守彼岸准的命名规则.
否则的可能会遇到预料之外的情况.
比如说, 如果有一个名为 <span class="monospaced">tweetSearchResults</span> 的结构体, Thrift编译器将会生成一个名为
 <span class="monospaced">TweetSearchResults</span> 的Java文件来包含一个名为 <span class="monospaced">tweetSearchResults</span> 的类.
这将导致编译错误.</p></div>
</td>
</tr></table>
</div>
</div>
<div class="sect3">
<h4 id="_types">Types</h4>
<div class="paragraph"><p>Thrift maps the various base and container types to Java types as follows:</p></div>
<div class="paragraph"><p>Thrift基类型和容器类型与Java类型的映射如下:</p></div>
<div class="ulist"><ul>
<li>
<p>
<span class="monospaced">bool</span>: <span class="monospaced">boolean</span>
</p>
</li>
<li>
<p>
<span class="monospaced">binary</span>: <span class="monospaced">byte[]</span>
</p>
</li>
<li>
<p>
<span class="monospaced">byte</span>: <span class="monospaced">byte</span>
</p>
</li>
<li>
<p>
<span class="monospaced">i16</span>: <span class="monospaced">short</span>
</p>
</li>
<li>
<p>
<span class="monospaced">i32</span>: <span class="monospaced">int</span>
</p>
</li>
<li>
<p>
<span class="monospaced">i64</span>: <span class="monospaced">long</span>
</p>
</li>
<li>
<p>
<span class="monospaced">double</span>: <span class="monospaced">double</span>
</p>
</li>
<li>
<p>
<span class="monospaced">string</span>: <span class="monospaced">String</span>
</p>
</li>
<li>
<p>
<span class="monospaced">list&lt;t1&gt;</span>: <span class="monospaced">List&lt;t1&gt;</span>
</p>
</li>
<li>
<p>
<span class="monospaced">set&lt;t1&gt;</span>: <span class="monospaced">Set&lt;t1&gt;</span>
</p>
</li>
<li>
<p>
<span class="monospaced">map&lt;t1,t2&gt;</span>: <span class="monospaced">Map&lt;t1, t2&gt;</span>
</p>
</li>
</ul></div>
<div class="paragraph"><p>As you can see, the mapping is straight forward and one-to-one for the most
part. This is not surprising given that Java was the primary target language
when the Thrift project began.</p></div>
<div class="paragraph"><p>正如你所看到的，映射是直接的，大多都是一一对应的。 这是因为在Thrift项目开始时,
Java是主要的目标语言.</p></div>
</div>
<div class="sect3">
<h4 id="_typedefs">Typedefs</h4>
<div class="paragraph"><p>The Java language does not have any native support for "typedefs". So when the</p></div>
<div class="paragraph"><p>Java语言没有对"typedefs"原生支持. 所以当Thrife编译器遇到typedef声明时, 它只是
使用原始类型代替.</p></div>
<div class="paragraph"><p>Thrit Java code generator encounters a typedef declaration, it merely
substitutes it with the original type. That is, even though you may have
typedefd <span class="monospaced">TypeA</span> to <span class="monospaced">TypeB</span>, in the generated Java code, all references to
<span class="monospaced">TypeB</span> will be replaced by <span class="monospaced">TypeA</span>.</p></div>
<div class="paragraph"><p>因此, 尽管你将 <span class="monospaced">TypeA</span> typedef 为 <span class="monospaced">TypeB</span>, 在生成的Java代码中, 所有对 <span class="monospaced">TypeB</span>
都会被 <span class="monospaced">TypeA</span> 替换.</p></div>
<div class="paragraph"><p>Consider the example IDL above. The declaration for <span class="monospaced">tweets</span> in the generated
code for <span class="monospaced">TweetSearchResults</span> is simply <span class="monospaced">public List&lt;Tweets&gt; tweets</span>.</p></div>
<div class="paragraph"><p>考虑以上的范例, 声明中的 <span class="monospaced">TweetSearchResults</span> 里的 <span class="monospaced">tweets</span> 为
<span class="monospaced">public List&lt;Tweets&gt; tweets</span> .</p></div>
</div>
<div class="sect3">
<h4 id="_enums">Enums</h4>
<div class="paragraph"><p>Thrift enums map to Java <span class="monospaced">enum</span> types. You can obtain the numeric value of an
enum by using the <span class="monospaced">getValue</span> method (via the interface <span class="monospaced">TEnum</span>). In addition,
the compiler generates a <span class="monospaced">findByValue</span> method to obtain the enum corresponding
to a numeric value. This is more robust than using the <span class="monospaced">ordinal</span> feature of Java
enums.</p></div>
<div class="paragraph"><p>Thrift枚举映射为Java <span class="monospaced">enum</span> 类型. 你可以通过(接口 <span class="monospaced">TEnum</span> ) <span class="monospaced">getValue</span> 来获取其数字值.
此外, 编译器生成了一个 <span class="monospaced">findByValue</span> 方法来根据数字值来获取枚举.</p></div>
<div class="paragraph"><p>这比使用Java的 <span class="monospaced">ordinal</span> 特性更强大.</p></div>
</div>
<div class="sect3">
<h4 id="_constants">Constants</h4>
<div class="paragraph"><p>Thrift puts all defined constants in a public class named <span class="monospaced">Constants</span> as <span class="monospaced">public
static final</span> members. Constants of any of the primitive types are supported.</p></div>
<div class="paragraph"><p>Thrfit 将所有定义的常数作为 <span class="monospaced">public static final</span> 成员放入一个public类 <span class="monospaced">Constants</span> 中.</p></div>
<div class="admonitionblock">
<table><tr>
<td class="icon">
<img alt="Tip" src="data:image/png;base64,
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">
</td>
<td class="content">
<div class="title">Contain your Constants 使用常量</div>
<div class="paragraph"><p>If you have multiple Thrift files (in the same namespace) containing const
definitions, the Thrift compiler will overwrite the <span class="monospaced">Constants.java</span> file with
the definitions found in the file processed last. You <em>must</em> either define all
your constants in a single file, or invoke the compiler on a single file that
includes all the other files.</p></div>
<div class="paragraph"><p>如果你有多个Thrift文件(在同一个命名空间中)包含const定义, Thrift编译器会使用最后处理
的覆盖 <span class="monospaced">Constants.java</span> 的内容. 你 <em>必须</em> 在一个文件中定义所有的常数, 或者在一个包含
了所有其他的文件生调用编译器.</p></div>
</td>
</tr></table>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_c">C++</h3>
<div class="sect3">
<h4 id="_generated_files_2">Generated Files</h4>
<div class="ulist"><ul>
<li>
<p>
所有的出书都会生成到单独的一对+.cpp/.h+中 all constants go into a single <span class="monospaced">.cpp/.h</span> pair
</p>
</li>
<li>
<p>
所有的类型定义(枚举和结构体)会生成至另一对+.cpp/.h+中 all type definitions (enums and structs) go into another <span class="monospaced">.cpp/.h</span> pair
</p>
</li>
<li>
<p>
每个服务会有自己的<span class="monospaced">.cpp/.h+对 each service gets its own +.cpp/.h</span> pair
</p>
</li>
</ul></div>
<div class="listingblock">
<div class="content monospaced">
<pre>$ tree gen-cpp
|-- example_constants.cpp
|-- example_constants.h
|-- example_types.cpp
|-- example_types.h
|-- Twitter.cpp
|-- Twitter.h
`-- Twitter_server.skeleton.cpp</pre>
</div></div>
</div>
<div class="sect3">
<h4 id="_types_2">Types</h4>
<div class="paragraph"><p>Thrift maps the various base and container types to C++ types as follows:</p></div>
<div class="paragraph"><p>Thrift基类型和容器类型与C++类型的映射如下:</p></div>
<div class="ulist"><ul>
<li>
<p>
<span class="monospaced">bool</span>: <span class="monospaced">bool</span>
</p>
</li>
<li>
<p>
<span class="monospaced">binary</span>: <span class="monospaced">std::string</span>
</p>
</li>
<li>
<p>
<span class="monospaced">byte</span>: <span class="monospaced">int8_t</span>
</p>
</li>
<li>
<p>
<span class="monospaced">i16</span>: <span class="monospaced">int16_t</span>
</p>
</li>
<li>
<p>
<span class="monospaced">i32</span>: <span class="monospaced">int32_t</span>
</p>
</li>
<li>
<p>
<span class="monospaced">i64</span>: <span class="monospaced">int64_t</span>
</p>
</li>
<li>
<p>
<span class="monospaced">double</span>: <span class="monospaced">double</span>
</p>
</li>
<li>
<p>
<span class="monospaced">string</span>: <span class="monospaced">std::string</span>
</p>
</li>
<li>
<p>
<span class="monospaced">list&lt;t1&gt;</span>: <span class="monospaced">std::vector&lt;t1&gt;</span>
</p>
</li>
<li>
<p>
<span class="monospaced">set&lt;t1&gt;</span>: <span class="monospaced">std::set&lt;t1&gt;</span>
</p>
</li>
<li>
<p>
<span class="monospaced">map&lt;t1,t2&gt;</span>: <span class="monospaced">std::map&lt;T1, T2&gt;</span>
</p>
</li>
</ul></div>
</div>
</div>
<div class="sect2">
<h3 id="_other_languages_其他语言">Other Languages 其他语言</h3>
<div class="paragraph"><p>Python, Ruby, Javascript etc.</p></div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_best_practices_最佳实践">Best Practices 最佳实践</h2>
<div class="sectionbody">
<div class="sect2">
<h3 id="_versioning_compatibility_版本和兼容性">Versioning/Compatibility 版本和兼容性</h3>
<div class="paragraph"><p>Protocols evolve over time. If an existing message type no longer meets all
your needs&#8201;&#8212;&#8201;for example, you&#8217;d like the message format to have an extra field&#8201;&#8212;&#8201;but you&#8217;d still like to use code created with the old format, don&#8217;t worry!
It&#8217;s very simple to update message types without breaking any of your existing
code. Just remember the following rules:</p></div>
<div class="paragraph"><p>协议总是在不断的进化中, 如果一个现存的消息类型不在满足你的任何需求&#8201;&#8212;&#8201; 比如说, 你需要
消息格式包含额外的域&#8201;&#8212;&#8201;但是你任然想要使用以旧格式创建的代码, 不用担心!
更新消息类型非常简单，且不会破坏任何现有代码. 仅需记住以下规则:</p></div>
<div class="ulist"><ul>
<li>
<p>
Don&#8217;t change the numeric tags for any existing fields.
</p>
</li>
<li>
<p>
不要改变现有域的唯一数字标记
</p>
</li>
<li>
<p>
Any new fields that you add should be optional. This means that any messages
  serialized by code using your "old" message format can be parsed by your new
  generated code, as they won&#8217;t be missing any required elements. You should set
  up sensible default values for these elements so that new code can properly
  interact with messages generated by old code. Similarly, messages created by
  your new code can be parsed by your old code: old binaries simply ignore the
  new field when parsing. However, the unknown fields are not discarded, and if
  the message is later serialized, the unknown fields are serialized along with
  it&#8201;&#8212;&#8201;so if the message is passed on to new code, the new fields are still
  available.
</p>
</li>
<li>
<p>
任何新添加的域都应该是optional. 这意味着使用"旧"消息格式代码代码序列化的消息可以
  被新生成的代码解析, 因为它们不会缺少任何required元素. 同时你也应该为这些新添加的
  元素制定合理的默认值. 这样新生成的代码就可以正常的处理由旧代码生成的消息. 同样, 新
  代码生成的消息也可以被旧代码解析: 新添加的域将会被忽略. 然而, 未知域并不会被丢弃.
  如果该消息稍后序列化，未知域随其一同序列化&#8201;&#8212;&#8201;所以如果消息传递给新的代码，新的字段
  仍然是可用。
</p>
</li>
<li>
<p>
Non-required fields can be removed, as long as the tag number is not used
  again in your updated message type (it may be better to rename the field
  instead, perhaps adding the prefix "OBSOLETE_", so that future users of your
  .thrift can&#8217;t accidentally reuse the number).
</p>
</li>
<li>
<p>
只要数字标识不会被更新后的消息类型重用, Non-required域可以被删除(更好的解决方案是重命名
  这些域, 比如说加上"OBSOLETE_"前缀, 以避免以后其他用户不消息重用数字标识).
</p>
</li>
<li>
<p>
Changing a default value is generally OK, as long as you remember that default
  values are never sent over the wire. Thus, if a program receives a message in
  which a particular field isn&#8217;t set, the program will see the default value as
  it was defined in that program&#8217;s version of the protocol. It will NOT see the
  default value that was defined in the sender&#8217;s code.
</p>
</li>
<li>
<p>
因为默认值不会通过消息传送, 改变默认值一般来说是没有问题的. 因此, 如果程序收到包含
  未设定域的消息, 程序将会使用当前版本中所使用的默认值来初始化未设定域, 而不会使用发送者
  版本中所定义的默认值.
</p>
</li>
</ul></div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_resources_其他资源">Resources 其他资源</h2>
<div class="sectionbody">
<div class="ulist"><ul>
<li>
<p>
<a href="http://thrift.apache.org/static/files/thrift-20070401.pdf">Thrift whitepaper</a>
</p>
</li>
<li>
<p>
<a href="http://wiki.apache.org/thrift/Tutorial">Thrift Tutorial</a>
</p>
</li>
<li>
<p>
<a href="http://wiki.apache.org/thrift">Thrift Wiki</a>
</p>
</li>
<li>
<p>
<a href="http://code.google.com/apis/protocolbuffers/docs/overview.html">Protocol
  Buffers</a>
</p>
</li>
</ul></div>
</div>
</div>
<div class="sect1">
<h2 id="_translations_其他译本">Translations 其他译本</h2>
<div class="sectionbody">
<div class="ulist"><ul>
<li>
<p>
<a href="http://science.webhostinggeeks.com/thrift-uputstvo-koje-nedostaje">Serbo-Croatian</a>
  by Anja Skarba of <a href="http://webhostinggeeks.com/">http://webhostinggeeks.com/</a>
</p>
</li>
<li>
<p>
<a href="https://nobodyhub-learn.github.io/thrift-missing-guide/">Chinese Version</a> by Yan Hai
</p>
</li>
</ul></div>
</div>
</div>
</div>
<div id="footnotes"><hr></div>
<div id="footer">
<div id="footer-text">
Last updated
 2018-04-16 22:22:30 +08
</div>
</div>
</body>
</html>
